"use strict";function asyncGeneratorStep(t,e,r,n,o,a,c){try{var i=t[a](c),s=i.value}catch(t){return void r(t)}i.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(i){return function(){var t=this,c=arguments;return new Promise(function(e,r){var n=i.apply(t,c);function o(t){asyncGeneratorStep(n,e,r,o,a,"next",t)}function a(t){asyncGeneratorStep(n,e,r,o,a,"throw",t)}o(void 0)})}}var pause;document.querySelector("#clickMe").addEventListener("click",openPopup),document.querySelector("#clickMe1").addEventListener("click",openPopup),document.querySelector("#closePopup").addEventListener("click",closePopup);var el=$("#popup"),inner=$(".popup-inner");function openPopup(){inner.attr("style","margin-right:20px"),el.removeClass("fade-out").addClass("fade-in"),el.attr("style","visibility:visible"),$("body").css({overflow:"hidden"}),chatbot()}function closePopup(){inner.attr("style","margin-right:0px"),el.removeClass("fade-in").addClass("fade-out"),el.attr("style","visibility:hidden"),$("body").css({overflow:"auto"})}var privacyLink="http://integrityfinancialservicellc.com/wp-content/uploads/2015/05/IFS-Privacy-Pledge-and-Notification.pdf",fields={name:"",email:"",phone:"",portfolioSize:""},chatbot=function(){var e=!1;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=11;break}return e=!0,t.next=4,writeText({text:"Perfect ".concat(fields.name,". What would best describe the amount of investable assets you have saved for retirement? (We customize the information we send based on your situation)"),style:"selection",writer:"bot"});case 4:return fields.portfolioSize=t.sent,t.next=7,writeText({text:"".concat(fields.portfolioSize),style:"text",writer:"user"});case 7:return t.next=9,writeText({text:"Great ".concat(fields.name,", one last thing.  We need to make sure you're a real person!  Solve the captcha below and we'll get that book sent over to you!"),style:"text",writer:"bot"});case 9:return t.next=11,writeText({text:fields.email,style:"captcha",writer:"bot"});case 11:case"end":return t.stop()}},t)}))}();function writeText(t){return _writeText.apply(this,arguments)}function _writeText(){return(_writeText=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var r,n,o,a,c,i,s,l,u,d,p,v,f,h,b,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:$(".row-current").removeClass("row-current"),$("#bot-chat-current").removeAttr("id"),$("#user-chat-current").removeAttr("id"),$("#left-tag-current").removeAttr("id"),$("#right-tag-current").removeAttr("id"),$("#popup-window").append('<div class="row align-items-center chat-row row-current"> \t\t\t\t\t\t<div class="col-md-1 col-xl-2 padding-column"> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div id="left-tag-current" class="col-2 col-sm-1 logo-column"> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="col-8 col-sm-10 col-md-8 col-xl-6 content-column"> \t\t\t\t\t\t\t<div id="bot-chat-current" class="chat-bubble bot chat-fade-in"> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t<div id="user-chat-current" class="chat-bubble user float-right chat-fade-in"> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div id="right-tag-current" class="col-2 col-sm-1 logo-column"> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="col-md-1 col-xl-2 padding-column"> \t\t\t\t\t\t</div> \t\t\t\t\t</div>'),"bot"===e.writer?(r=1<$(".chat-row").length?'<img id="bot-logo-current" src="images/IFSLogo.png" class="bot-logo logo-pop-in">':'<img id="bot-logo-current" src="images/IFSLogo.png" class="bot-logo">',$("#right-tag-current").append('<div id="bot-clock-current" class="bot-clock"></div>')):$("#left-tag-current").append('<div id="user-clock-current" class="user-clock"></div>'),s=new Date,s=s.getHours()+":"+s.getMinutes()+":"+s.getSeconds(),"bot"===e.writer?(n=$("#bot-chat-current"),o=$("#bot-clock-current"),c=$("#user-chat-current"),a=$("#user-clock-current"),i='<div class="clock-text bot-clock-text">'+s+"</div>",$(".bot.last").removeClass("last")):(n=$("#user-chat-current"),o=$("#user-clock-current"),c=$("#bot-chat-current"),a=$("#bot-clock-current"),$(".row-current").addClass("height-shift"),i='<div class="clock-text user-clock-text" style="height:100%;max-height:100%">'+s+"</div>",$(".user.last").removeClass("last")),n.addClass("last"),a.remove(),c.remove(),o.append(i),o.removeAttr("id"),t.t0=e.style,t.next="text"===t.t0?19:"form"===t.t0?22:"selection"===t.t0?28:"captcha"===t.t0?38:44;break;case 19:return n.append('<p class="chat-text">'.concat(e.text,"</p>")),l=delay(1e3),t.abrupt("break",44);case 22:return n.append('<p class="chat-text">'+e.text+'</p><div class="input-group mb-3"> \t\t\t<input type="text" id="'.concat(e.field,'-input" class="form-control" placeholder="Your ').concat(e.field,'" aria-label="Your ').concat(e.field,'" aria-describedby="').concat(e.field,'-submit">  \n  \t\t\t<div class="input-group-append"> \t\t\t<span class="input-group-text" id="').concat(e.field,'-submit"> ok</span></div></div>')),u=$("#".concat(e.field,"-submit")),pause=!0,u.on("click",unpause),l=pauseUntil("#".concat(e.field,"-input")),t.abrupt("break",44);case 28:for(n.append('<p class="chat-text">'+e.text+"</p>"),u=["Less than $100,000 of investable assets saved for retirement","Between $100,000 and $250,000 of investable assets saved for retirement","Between $250,000 and $500,000 of investable assets saved for retirement","Between $500,000 and $1,000,000 of investable assets saved for retirement","Over $1,000,000 of investable assets saved for retirement"],n.append('<div class="portfolio-selection">'),d=$(".portfolio-selection"),p=0,v=u;p<v.length;p++)f=v[p],d.append('<button type="button" class="btn btn-light portolio-button" value="'.concat(f,'" label="').concat(f,'">'));return d.on("click","button",function(){h=$(this).attr("value"),unpause()}),n.append("</div>"),pause=!0,l=pauseUntil(h),t.abrupt("break",44);case 38:return n.append('<p class="chat-text">'+e.text+"</p>"),function(){grecaptcha.render("captcha_container",{sitekey:"6Ld4LyQaAAAAAAcJgIAMJQCQ3B-ArchznBkWR7A9",callback:function(t){console.log(t)}})}(),pause=!0,l=pauseUntil(),t.abrupt("break",44);case 44:return"bot"===e.writer&&(1<$(".content-column").length&&(b=$(".row-current").height()/2+$("#last-bot-row").height()/2,0!==(m=$(".height-shift")).length&&m.each(function(){b+=$(this).height()}),$("#bot-logo-current").velocity({top:b},{duration:400,easing:"easeInQuad",complete:function(t){setTimeout(function(){$(t).css("visibility","hidden").removeAttr("id"),m.removeClass("height-shift")},300)}}),$("#last-bot-row").removeAttr("id"),$("#bot-logo-current").removeAttr("id"),$("bot-logo").last().attr("id","bot-logo-current")),$("#left-tag-current").append(r),$(".row-current").attr("id","last-bot-row")),t.next=47,l;case 47:return t.abrupt("return",t.sent);case 48:case"end":return t.stop()}},t)}))).apply(this,arguments)}function delay(r){return new Promise(function(t,e){setTimeout(function(){t(null)},r)})}function unpause(){pause=!1}function pauseUntil(t){return _pauseUntil.apply(this,arguments)}function _pauseUntil(){return(_pauseUntil=_asyncToGenerator(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(pause)return t.next=3,delay(100);t.next=5;break;case 3:t.next=0;break;case 5:return t.abrupt("return",$(e).val());case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function encryptFormData(t){}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsicGF1c2UiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwib3BlblBvcHVwIiwiY2xvc2VQb3B1cCIsIiQiLCJlbCIsImF0dHIiLCJpbm5lciIsImFkZENsYXNzIiwib3ZlcmZsb3ciLCJyZW1vdmVDbGFzcyIsImNoYXRib3QiLCJjc3MiLCJwcml2YWN5TGluayIsImZpZWxkcyIsIm5hbWUiLCJlbWFpbCIsInBob25lIiwicG9ydGZvbGlvU2l6ZSIsImV4ZWN1dGVkIiwiX2NhbGxlZSIsInJlZ2VuZXJhdG9yUnVudGltZSIsIndyYXAiLCJfY29udGV4dCIsInByZXYiLCJuZXh0Iiwid3JpdGVUZXh0IiwidGV4dCIsImNvbmNhdCIsInN0eWxlIiwid3JpdGVyIiwic2VudCIsInN0b3AiLCJfY2FsbGVlMiIsImxvZ29UZXh0IiwiY2hhdCIsImNsb2NrIiwiY2xvY2tUb1JlbW92ZSIsImNoYXRUb1JlbW92ZSIsImNsb2NrVGV4dCIsInRpbWUiLCJyZXR1cm5WYWx1ZSIsInNpemVzIiwic2VsZWN0aW9uIiwiX2kiLCJfc2l6ZXMiLCJzaXplIiwibG9nb1NoaWZ0RG93biIsInJvd3NUb1NoaWZ0IiwiX2NvbnRleHQyIiwicmVtb3ZlQXR0ciIsImFwcGVuZCIsIm9wdGlvbnMiLCJsZW5ndGgiLCJkIiwiRGF0ZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJyZW1vdmUiLCJ0MCIsImRlbGF5IiwiYWJydXB0IiwiZmllbGQiLCJ1bnBhdXNlIiwicGF1c2VVbnRpbCIsIm9uIiwidGhpcyIsImdyZWNhcHRjaGEiLCJyZW5kZXIiLCJzaXRla2V5IiwiY2FsbGJhY2siLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJsb2FkQ2FwdGNoYSIsImNhcHRjaGFDb250YWluZXIiLCJoZWlnaHQiLCJlYWNoIiwidmVsb2NpdHkiLCJkdXJhdGlvbiIsImNvbXBsZXRlIiwibGFzdCIsInNldFRpbWVvdXQiLCJyZXNvbHZlIiwibXMiLCJfY2FsbGVlMyIsIl9jb250ZXh0MyIsImVsZW1lbnQiLCJ2YWwiLCJlbmNyeXB0Rm9ybURhdGEiLCJkYXRhIl0sIm1hcHBpbmdzIjoiMFlBRUEsSUFBSUEsTUFDSkMsU0FBU0MsY0FBYyxZQUFZQyxpQkFBaUIsUUFBU0MsV0FDN0RILFNBQVNDLGNBQWMsYUFBYUMsaUJBQWlCLFFBQVNDLFdBQzlESCxTQUFTQyxjQUFjLGVBQWVDLGlCQUFpQixRQUFTRSxZQUhoRSxJQUFJTCxHQUFKTSxFQUFBLFVBQ0FMLE1BQVNDLEVBQUFBLGdCQUVURCxTQUFTQyxZQUNMSyxNQUFNQyxLQUFDLFFBQVgscUJBQ0lDLEdBQUFBLFlBQVUsWUFBZEMsU0FBQSxXQUtJSCxHQUFHQyxLQUFLLFFBQVMsc0JBSHJCRixFQUFBLFFBQVNGLElBQVQsQ0FBQU8sU0FBcUIsV0FDakJGLFVBR0FILFNBQUVELGFBQWNNLE1BQUFBLEtBQVUsUUFBQSxvQkFBMUJKLEdBQUFLLFlBQUEsV0FBQUYsU0FBQSxZQUNBRyxHQUFBQSxLQUFPLFFBQUEscUJBUVBQLEVBQUUsUUFBUVEsSUFBSSxDQUFFSCxTQUFVLFNBQTFCTCxJQUFFUyxZQUFjSiw2R0FBaEJLLE9BQ0EsQ0FDSEMsS0FBQSxHQUVEQyxNQUFBLEdBQ0FDLE1BQUEsR0FPSUMsY0FBZSxJQUpmSixRQUFTLFdBQ1RDLElBQU1JLEdBREcsRUFFVEgsT0FBQUEsa0JBQUFBLG1CQUFBQSxLQUZTLFNBQUFJLElBQUEsT0FBQUMsbUJBQUFDLEtBQUEsU0FBQUMsR0FBQSxPQUFBLE9BQUFBLEVBQUFDLEtBQUFELEVBQUFFLE1BQUEsS0FBQSxFQUFBLEdBQUFOLEVBQUEsQ0FBQUksRUFBQUUsS0FBQSxHQUFBLE1BQUEsT0FJVFAsR0FBZSxFQUpOSyxFQUFBRSxLQUFBLEVBOEREQyxVQUFBLENBQ0FDLEtBQUEsV0FBQUMsT0FBQWQsT0FBQUMsS0FBQSw0SkFDQWMsTUFBQSxZQUNBQyxPQUFBLFFBakVDLEtBQUEsRUFBQSxPQThERGhCLE9B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QUFBSSxnQkFBQUMiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIHBhdXNlO1xyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NsaWNrTWVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qb3B1cCk7XHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2xpY2tNZTFcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qb3B1cCk7XHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2xvc2VQb3B1cFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VQb3B1cCk7XHJcbmxldCBlbCA9ICQoXCIjcG9wdXBcIik7XHJcbmxldCBpbm5lciA9ICQoXCIucG9wdXAtaW5uZXJcIik7XHJcblxyXG5mdW5jdGlvbiBvcGVuUG9wdXAoKSB7XHJcbiAgICBpbm5lci5hdHRyKFwic3R5bGVcIiwgXCJtYXJnaW4tcmlnaHQ6MjBweFwiKTtcclxuICAgIGVsLnJlbW92ZUNsYXNzKFwiZmFkZS1vdXRcIikuYWRkQ2xhc3MoXCJmYWRlLWluXCIpO1xyXG4gICAgZWwuYXR0cihcInN0eWxlXCIsIFwidmlzaWJpbGl0eTp2aXNpYmxlXCIpO1xyXG4gICAgJChcImJvZHlcIikuY3NzKHsgb3ZlcmZsb3c6IFwiaGlkZGVuXCIgfSk7XHJcbiAgICBjaGF0Ym90KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlUG9wdXAoKSB7XHJcbiAgICBpbm5lci5hdHRyKFwic3R5bGVcIiwgXCJtYXJnaW4tcmlnaHQ6MHB4XCIpO1xyXG4gICAgZWwucmVtb3ZlQ2xhc3MoXCJmYWRlLWluXCIpLmFkZENsYXNzKFwiZmFkZS1vdXRcIik7XHJcbiAgICBlbC5hdHRyKFwic3R5bGVcIiwgXCJ2aXNpYmlsaXR5OmhpZGRlblwiKTtcclxuICAgIC8vIGlmICgkKHdpbmRvdykud2lkdGgoKSA+PSA3NjgpIHtcclxuICAgICQoXCJib2R5XCIpLmNzcyh7IG92ZXJmbG93OiBcImF1dG9cIiB9KTtcclxuICAgIC8vIH1cclxufVxyXG5cclxuLypHZXQgZXhpc3Rpbmcgcm93IGhlaWdodCwgYWRkIDFyZW0gZm9yIGV2ZXJ5IHRpbWUgY2hhdC1idWJibGUgdGV4dCB3aWxsIHdyYXAsIGFuaW1hdGUgYm90LWxvZ28ncyBzaGlmdCBkb3duIHdpdGggdG9wOlxyXG4gIG1vdmUgYm90LWxvZ28gdG8gbmV3IHJvdyBhZnRlciBhbmltYXRpb24gdGltZW91dCovXHJcbmxldCBwcml2YWN5TGluayA9XHJcbiAgICBcImh0dHA6Ly9pbnRlZ3JpdHlmaW5hbmNpYWxzZXJ2aWNlbGxjLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAxNS8wNS9JRlMtUHJpdmFjeS1QbGVkZ2UtYW5kLU5vdGlmaWNhdGlvbi5wZGZcIjtcclxubGV0IGZpZWxkcyA9IHtcclxuICAgIG5hbWU6IFwiXCIsXHJcbiAgICBlbWFpbDogXCJcIixcclxuICAgIHBob25lOiBcIlwiLFxyXG4gICAgcG9ydGZvbGlvU2l6ZTogXCJcIixcclxufTtcclxuXHJcbmxldCBjaGF0Ym90ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBleGVjdXRlZCA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIWV4ZWN1dGVkKSB7XHJcbiAgICAgICAgICAgIGV4ZWN1dGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgLy8gICAgIHRleHQ6IFwiT3VyIGJvb2sgaGFzIGJlZW4gcmVxdWVzdGVkIG92ZXIgTmFOIHRpbWVzIVwiLFxyXG4gICAgICAgICAgICAvLyAgICAgc3R5bGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAvLyAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgLy8gYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgLy8gICAgIHRleHQ6XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgXCJBbGwgd2UgbmVlZCBzb21lIGluZm9ybWF0aW9uIHRvIGRldGVybWluZSB3aGV0aGVyIHRoaXMgYm9vayBzdWl0cyB5b3VyIG5lZWRzLlwiLFxyXG4gICAgICAgICAgICAvLyAgICAgc3R5bGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAvLyAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgLy8gZmllbGRzLm5hbWUgPSBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAvLyAgICAgdGV4dDogXCJGaXJzdCBvZiBhbGwsIHdoYXQgaXMgeW91ciBuYW1lP1wiLFxyXG4gICAgICAgICAgICAvLyAgICAgc3R5bGU6IFwiZm9ybVwiLFxyXG4gICAgICAgICAgICAvLyAgICAgZmllbGQ6IFwibmFtZVwiLFxyXG4gICAgICAgICAgICAvLyAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgLy8gYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgLy8gICAgIHRleHQ6IGZpZWxkcy5uYW1lLFxyXG4gICAgICAgICAgICAvLyAgICAgc3R5bGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAvLyAgICAgd3JpdGVyOiBcInVzZXJcIixcclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgIC8vIGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgIC8vICAgICB0ZXh0OiBgR3JlYXQhIE5pY2UgdG8gbWVldCB5b3UgJHtmaWVsZHMubmFtZX0hYCxcclxuICAgICAgICAgICAgLy8gICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgLy8gICAgIHdyaXRlcjogXCJib3RcIixcclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgIC8vIGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgIC8vICAgICB0ZXh0OlxyXG4gICAgICAgICAgICAvLyAgICAgICAgIFwiQmVmb3JlIHdlIGdvIGFueSBmdXJ0aGVyLCB3ZSB3YW50IHlvdSB0byBrbm93IHdlIHRha2UgeW91ciBkYXRhIFZFUlkgc2VyaW91c2x5LlwiLFxyXG4gICAgICAgICAgICAvLyAgICAgc3R5bGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAvLyAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgLy8gYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgLy8gICAgIHRleHQ6IGA8YSBocmVmPSR7cHJpdmFjeUxpbmt9IHRhcmdldD1cIl9ibGFua1wiPkhlcmU8L2E+IGlzIG91ciBwcml2YWN5IHBvbGljeS5gLFxyXG4gICAgICAgICAgICAvLyAgICAgc3R5bGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAvLyAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIGZpZWxkcy5waG9uZSA9IGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgIC8vICAgICB0ZXh0OlxyXG4gICAgICAgICAgICAvLyAgICAgICAgIFwiV2hhdCdzIGEgZ29vZCBwaG9uZSBudW1iZXIgdG8gcmVhY2ggeW91IGF0PyAoV2Ugd29uJ3Qgc3BhbSB5b3U7IG9ubHkgYSBvbmUgdGltZSBjb25maXJtYXRpb24pXCIsXHJcbiAgICAgICAgICAgIC8vICAgICBzdHlsZTogXCJmb3JtXCIsXHJcbiAgICAgICAgICAgIC8vICAgICBmaWVsZDogXCJwaG9uZVwiLFxyXG4gICAgICAgICAgICAvLyAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgLy8gYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgLy8gICAgIHRleHQ6IGZpZWxkcy5waG9uZSxcclxuICAgICAgICAgICAgLy8gICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgLy8gICAgIHdyaXRlcjogXCJ1c2VyXCIsXHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICAvLyBmaWVsZHMuZW1haWwgPSBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAvLyAgICAgdGV4dDpcclxuICAgICAgICAgICAgLy8gICAgICAgICBcIkdyZWF0ISBBbmQgd2hhdCBpcyBhIGdvb2QgZW1haWwgd2UgY2FuIHNlbmQgeW91ciBib29rIHRvPyAoQWdhaW4sIHdlIHdvbid0IHNwYW0geW91KVwiLFxyXG4gICAgICAgICAgICAvLyAgICAgc3R5bGU6IFwiZm9ybVwiLFxyXG4gICAgICAgICAgICAvLyAgICAgZmllbGQ6IFwiZW1haWxcIixcclxuICAgICAgICAgICAgLy8gICAgIHdyaXRlcjogXCJib3RcIixcclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgIC8vIGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgIC8vICAgICB0ZXh0OiBgJHtmaWVsZHMuZW1haWx9YCxcclxuICAgICAgICAgICAgLy8gICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgLy8gICAgIHdyaXRlcjogXCJ1c2VyXCIsXHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICBmaWVsZHMucG9ydGZvbGlvU2l6ZSA9IGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgUGVyZmVjdCAke2ZpZWxkcy5uYW1lfS4gV2hhdCB3b3VsZCBiZXN0IGRlc2NyaWJlIHRoZSBhbW91bnQgb2YgaW52ZXN0YWJsZSBhc3NldHMgeW91IGhhdmUgc2F2ZWQgZm9yIHJldGlyZW1lbnQ/IChXZSBjdXN0b21pemUgdGhlIGluZm9ybWF0aW9uIHdlIHNlbmQgYmFzZWQgb24geW91ciBzaXR1YXRpb24pYCxcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcInNlbGVjdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IGAke2ZpZWxkcy5wb3J0Zm9saW9TaXplfWAsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwidXNlclwiLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBHcmVhdCAke2ZpZWxkcy5uYW1lfSwgb25lIGxhc3QgdGhpbmcuICBXZSBuZWVkIHRvIG1ha2Ugc3VyZSB5b3UncmUgYSByZWFsIHBlcnNvbiEgIFNvbHZlIHRoZSBjYXB0Y2hhIGJlbG93IGFuZCB3ZSdsbCBnZXQgdGhhdCBib29rIHNlbnQgb3ZlciB0byB5b3UhYCxcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICAgIHdyaXRlcjogXCJib3RcIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBmaWVsZHMuZW1haWwsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJjYXB0Y2hhXCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pKCk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiB3cml0ZVRleHQob3B0aW9ucykge1xyXG4gICAgY29uc3QgYnViYmxlSFRNTCA9XHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJyb3cgYWxpZ24taXRlbXMtY2VudGVyIGNoYXQtcm93IHJvdy1jdXJyZW50XCI+IFxcXHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb2wtbWQtMSBjb2wteGwtMiBwYWRkaW5nLWNvbHVtblwiPiBcXFxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj4gXFxcclxuXHRcdFx0XHRcdFx0PGRpdiBpZD1cImxlZnQtdGFnLWN1cnJlbnRcIiBjbGFzcz1cImNvbC0yIGNvbC1zbS0xIGxvZ28tY29sdW1uXCI+IFxcXHJcblx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29sLTggY29sLXNtLTEwIGNvbC1tZC04IGNvbC14bC02IGNvbnRlbnQtY29sdW1uXCI+IFxcXHJcblx0XHRcdFx0XHRcdFx0PGRpdiBpZD1cImJvdC1jaGF0LWN1cnJlbnRcIiBjbGFzcz1cImNoYXQtYnViYmxlIGJvdCBjaGF0LWZhZGUtaW5cIj4gXFxcclxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj4gXFxcclxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGlkPVwidXNlci1jaGF0LWN1cnJlbnRcIiBjbGFzcz1cImNoYXQtYnViYmxlIHVzZXIgZmxvYXQtcmlnaHQgY2hhdC1mYWRlLWluXCI+IFxcXHJcblx0XHRcdFx0XHRcdFx0PC9kaXY+IFxcXHJcblx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGlkPVwicmlnaHQtdGFnLWN1cnJlbnRcIiBjbGFzcz1cImNvbC0yIGNvbC1zbS0xIGxvZ28tY29sdW1uXCI+IFxcXHJcblx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29sLW1kLTEgY29sLXhsLTIgcGFkZGluZy1jb2x1bW5cIj4gXFxcclxuXHRcdFx0XHRcdFx0PC9kaXY+IFxcXHJcblx0XHRcdFx0XHQ8L2Rpdj4nO1xyXG5cclxuICAgICQoXCIucm93LWN1cnJlbnRcIikucmVtb3ZlQ2xhc3MoXCJyb3ctY3VycmVudFwiKTtcclxuICAgICQoXCIjYm90LWNoYXQtY3VycmVudFwiKS5yZW1vdmVBdHRyKFwiaWRcIik7XHJcbiAgICAkKFwiI3VzZXItY2hhdC1jdXJyZW50XCIpLnJlbW92ZUF0dHIoXCJpZFwiKTtcclxuICAgICQoXCIjbGVmdC10YWctY3VycmVudFwiKS5yZW1vdmVBdHRyKFwiaWRcIik7XHJcbiAgICAkKFwiI3JpZ2h0LXRhZy1jdXJyZW50XCIpLnJlbW92ZUF0dHIoXCJpZFwiKTtcclxuXHJcbiAgICBsZXQgbG9nb1RleHQ7XHJcbiAgICAkKFwiI3BvcHVwLXdpbmRvd1wiKS5hcHBlbmQoYnViYmxlSFRNTCk7XHJcbiAgICBpZiAob3B0aW9ucy53cml0ZXIgPT09IFwiYm90XCIpIHtcclxuICAgICAgICBpZiAoJChcIi5jaGF0LXJvd1wiKS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIGxvZ29UZXh0ID1cclxuICAgICAgICAgICAgICAgICc8aW1nIGlkPVwiYm90LWxvZ28tY3VycmVudFwiIHNyYz1cImltYWdlcy9JRlNMb2dvLnBuZ1wiIGNsYXNzPVwiYm90LWxvZ28gbG9nby1wb3AtaW5cIj4nO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxvZ29UZXh0ID1cclxuICAgICAgICAgICAgICAgICc8aW1nIGlkPVwiYm90LWxvZ28tY3VycmVudFwiIHNyYz1cImltYWdlcy9JRlNMb2dvLnBuZ1wiIGNsYXNzPVwiYm90LWxvZ29cIj4nO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKFwiI3JpZ2h0LXRhZy1jdXJyZW50XCIpLmFwcGVuZChcclxuICAgICAgICAgICAgJzxkaXYgaWQ9XCJib3QtY2xvY2stY3VycmVudFwiIGNsYXNzPVwiYm90LWNsb2NrXCI+PC9kaXY+J1xyXG4gICAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoXCIjbGVmdC10YWctY3VycmVudFwiKS5hcHBlbmQoXHJcbiAgICAgICAgICAgICc8ZGl2IGlkPVwidXNlci1jbG9jay1jdXJyZW50XCIgY2xhc3M9XCJ1c2VyLWNsb2NrXCI+PC9kaXY+J1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNoYXQsIGNsb2NrLCBjbG9ja1RvUmVtb3ZlLCBjaGF0VG9SZW1vdmUsIGNsb2NrVGV4dDtcclxuICAgIGxldCBkID0gbmV3IERhdGUoKTtcclxuICAgIGxldCB0aW1lID0gZC5nZXRIb3VycygpICsgXCI6XCIgKyBkLmdldE1pbnV0ZXMoKSArIFwiOlwiICsgZC5nZXRTZWNvbmRzKCk7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMud3JpdGVyID09PSBcImJvdFwiKSB7XHJcbiAgICAgICAgY2hhdCA9ICQoXCIjYm90LWNoYXQtY3VycmVudFwiKTtcclxuICAgICAgICBjbG9jayA9ICQoXCIjYm90LWNsb2NrLWN1cnJlbnRcIik7XHJcbiAgICAgICAgY2hhdFRvUmVtb3ZlID0gJChcIiN1c2VyLWNoYXQtY3VycmVudFwiKTtcclxuICAgICAgICBjbG9ja1RvUmVtb3ZlID0gJChcIiN1c2VyLWNsb2NrLWN1cnJlbnRcIik7XHJcbiAgICAgICAgY2xvY2tUZXh0ID0gJzxkaXYgY2xhc3M9XCJjbG9jay10ZXh0IGJvdC1jbG9jay10ZXh0XCI+JyArIHRpbWUgKyBcIjwvZGl2PlwiO1xyXG4gICAgICAgICQoXCIuYm90Lmxhc3RcIikucmVtb3ZlQ2xhc3MoXCJsYXN0XCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjaGF0ID0gJChcIiN1c2VyLWNoYXQtY3VycmVudFwiKTtcclxuICAgICAgICBjbG9jayA9ICQoXCIjdXNlci1jbG9jay1jdXJyZW50XCIpO1xyXG4gICAgICAgIGNoYXRUb1JlbW92ZSA9ICQoXCIjYm90LWNoYXQtY3VycmVudFwiKTtcclxuICAgICAgICBjbG9ja1RvUmVtb3ZlID0gJChcIiNib3QtY2xvY2stY3VycmVudFwiKTtcclxuICAgICAgICAkKFwiLnJvdy1jdXJyZW50XCIpLmFkZENsYXNzKFwiaGVpZ2h0LXNoaWZ0XCIpO1xyXG4gICAgICAgIGNsb2NrVGV4dCA9XHJcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY2xvY2stdGV4dCB1c2VyLWNsb2NrLXRleHRcIiBzdHlsZT1cImhlaWdodDoxMDAlO21heC1oZWlnaHQ6MTAwJVwiPicgK1xyXG4gICAgICAgICAgICB0aW1lICtcclxuICAgICAgICAgICAgXCI8L2Rpdj5cIjtcclxuICAgICAgICAkKFwiLnVzZXIubGFzdFwiKS5yZW1vdmVDbGFzcyhcImxhc3RcIik7XHJcbiAgICB9XHJcbiAgICBjaGF0LmFkZENsYXNzKFwibGFzdFwiKTtcclxuICAgIGNsb2NrVG9SZW1vdmUucmVtb3ZlKCk7XHJcbiAgICBjaGF0VG9SZW1vdmUucmVtb3ZlKCk7XHJcbiAgICBjbG9jay5hcHBlbmQoY2xvY2tUZXh0KTtcclxuICAgIGNsb2NrLnJlbW92ZUF0dHIoXCJpZFwiKTtcclxuICAgIGxldCByZXR1cm5WYWx1ZTtcclxuXHJcbiAgICBzd2l0Y2ggKG9wdGlvbnMuc3R5bGUpIHtcclxuICAgICAgICBjYXNlIFwidGV4dFwiOlxyXG4gICAgICAgICAgICBjaGF0LmFwcGVuZChgPHAgY2xhc3M9XCJjaGF0LXRleHRcIj4ke29wdGlvbnMudGV4dH08L3A+YCk7XHJcbiAgICAgICAgICAgIHJldHVyblZhbHVlID0gZGVsYXkoMTAwMCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJmb3JtXCI6XHJcbiAgICAgICAgICAgIGNoYXQuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgJzxwIGNsYXNzPVwiY2hhdC10ZXh0XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy50ZXh0ICtcclxuICAgICAgICAgICAgICAgICAgICBgPC9wPjxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cCBtYi0zXCI+IFxcXHJcblx0XHRcdDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwiJHtvcHRpb25zLmZpZWxkfS1pbnB1dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcGxhY2Vob2xkZXI9XCJZb3VyICR7b3B0aW9ucy5maWVsZH1cIiBhcmlhLWxhYmVsPVwiWW91ciAke29wdGlvbnMuZmllbGR9XCIgYXJpYS1kZXNjcmliZWRieT1cIiR7b3B0aW9ucy5maWVsZH0tc3VibWl0XCI+IFxcIFxyXG4gIFx0XHRcdDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cC1hcHBlbmRcIj4gXFxcclxuXHRcdFx0PHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC10ZXh0XCIgaWQ9XCIke29wdGlvbnMuZmllbGR9LXN1Ym1pdFwiPiBvazwvc3Bhbj48L2Rpdj48L2Rpdj5gXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBsZXQgZ28gPSAkKGAjJHtvcHRpb25zLmZpZWxkfS1zdWJtaXRgKTtcclxuICAgICAgICAgICAgcGF1c2UgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgZ28ub24oXCJjbGlja1wiLCB1bnBhdXNlKTtcclxuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBwYXVzZVVudGlsKGAjJHtvcHRpb25zLmZpZWxkfS1pbnB1dGApO1xyXG5cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInNlbGVjdGlvblwiOlxyXG4gICAgICAgICAgICBjaGF0LmFwcGVuZCgnPHAgY2xhc3M9XCJjaGF0LXRleHRcIj4nICsgb3B0aW9ucy50ZXh0ICsgXCI8L3A+XCIpO1xyXG4gICAgICAgICAgICBsZXQgc2l6ZXMgPSBbXHJcbiAgICAgICAgICAgICAgICBcIkxlc3MgdGhhbiAkMTAwLDAwMCBvZiBpbnZlc3RhYmxlIGFzc2V0cyBzYXZlZCBmb3IgcmV0aXJlbWVudFwiLFxyXG4gICAgICAgICAgICAgICAgXCJCZXR3ZWVuICQxMDAsMDAwIGFuZCAkMjUwLDAwMCBvZiBpbnZlc3RhYmxlIGFzc2V0cyBzYXZlZCBmb3IgcmV0aXJlbWVudFwiLFxyXG4gICAgICAgICAgICAgICAgXCJCZXR3ZWVuICQyNTAsMDAwIGFuZCAkNTAwLDAwMCBvZiBpbnZlc3RhYmxlIGFzc2V0cyBzYXZlZCBmb3IgcmV0aXJlbWVudFwiLFxyXG4gICAgICAgICAgICAgICAgXCJCZXR3ZWVuICQ1MDAsMDAwIGFuZCAkMSwwMDAsMDAwIG9mIGludmVzdGFibGUgYXNzZXRzIHNhdmVkIGZvciByZXRpcmVtZW50XCIsXHJcbiAgICAgICAgICAgICAgICBcIk92ZXIgJDEsMDAwLDAwMCBvZiBpbnZlc3RhYmxlIGFzc2V0cyBzYXZlZCBmb3IgcmV0aXJlbWVudFwiLFxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgY2hhdC5hcHBlbmQoJzxkaXYgY2xhc3M9XCJwb3J0Zm9saW8tc2VsZWN0aW9uXCI+Jyk7XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3Rpb24gPSAkKFwiLnBvcnRmb2xpby1zZWxlY3Rpb25cIik7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2l6ZSBvZiBzaXplcykge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICBgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWxpZ2h0IHBvcnRvbGlvLWJ1dHRvblwiIHZhbHVlPVwiJHtzaXplfVwiIGxhYmVsPVwiJHtzaXplfVwiPmBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBwb3J0Zm9saW9TaXplO1xyXG4gICAgICAgICAgICBzZWxlY3Rpb24ub24oXCJjbGlja1wiLCBcImJ1dHRvblwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBwb3J0Zm9saW9TaXplID0gJCh0aGlzKS5hdHRyKFwidmFsdWVcIik7XHJcbiAgICAgICAgICAgICAgICB1bnBhdXNlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjaGF0LmFwcGVuZChcIjwvZGl2PlwiKTtcclxuXHJcbiAgICAgICAgICAgIHBhdXNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBwYXVzZVVudGlsKHBvcnRmb2xpb1NpemUpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiY2FwdGNoYVwiOlxyXG4gICAgICAgICAgICBjaGF0LmFwcGVuZCgnPHAgY2xhc3M9XCJjaGF0LXRleHRcIj4nICsgb3B0aW9ucy50ZXh0ICsgXCI8L3A+XCIpO1xyXG4gICAgICAgICAgICBsZXQgY2FwdGNoYUNvbnRhaW5lcjtcclxuICAgICAgICAgICAgbGV0IGxvYWRDYXB0Y2hhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY2FwdGNoYUNvbnRhaW5lciA9IGdyZWNhcHRjaGEucmVuZGVyKFwiY2FwdGNoYV9jb250YWluZXJcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpdGVrZXk6IFwiNkxkNEx5UWFBQUFBQUFjSmdJQU1KUUNRM0ItQXJjaHpuQmtXUjdBOVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgbG9hZENhcHRjaGEoKTtcclxuXHJcbiAgICAgICAgICAgIHBhdXNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBwYXVzZVVudGlsKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMud3JpdGVyID09PSBcImJvdFwiKSB7XHJcbiAgICAgICAgaWYgKCQoXCIuY29udGVudC1jb2x1bW5cIikubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICBsZXQgbG9nb1NoaWZ0RG93biA9XHJcbiAgICAgICAgICAgICAgICAkKFwiLnJvdy1jdXJyZW50XCIpLmhlaWdodCgpIC8gMiArXHJcbiAgICAgICAgICAgICAgICAkKFwiI2xhc3QtYm90LXJvd1wiKS5oZWlnaHQoKSAvIDI7XHJcbiAgICAgICAgICAgIGxldCByb3dzVG9TaGlmdCA9ICQoXCIuaGVpZ2h0LXNoaWZ0XCIpO1xyXG4gICAgICAgICAgICBpZiAocm93c1RvU2hpZnQubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByb3dzVG9TaGlmdC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dvU2hpZnREb3duICs9ICQodGhpcykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKFwiI2JvdC1sb2dvLWN1cnJlbnRcIikudmVsb2NpdHkoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBsb2dvU2hpZnREb3duLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogXCJlYXNlSW5RdWFkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoXCJpZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NUb1NoaWZ0LnJlbW92ZUNsYXNzKFwiaGVpZ2h0LXNoaWZ0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICQoXCIjbGFzdC1ib3Qtcm93XCIpLnJlbW92ZUF0dHIoXCJpZFwiKTtcclxuXHJcbiAgICAgICAgICAgICQoXCIjYm90LWxvZ28tY3VycmVudFwiKS5yZW1vdmVBdHRyKFwiaWRcIik7XHJcbiAgICAgICAgICAgICQoXCJib3QtbG9nb1wiKS5sYXN0KCkuYXR0cihcImlkXCIsIFwiYm90LWxvZ28tY3VycmVudFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJChcIiNsZWZ0LXRhZy1jdXJyZW50XCIpLmFwcGVuZChsb2dvVGV4dCk7XHJcbiAgICAgICAgJChcIi5yb3ctY3VycmVudFwiKS5hdHRyKFwiaWRcIiwgXCJsYXN0LWJvdC1yb3dcIik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGF3YWl0IHJldHVyblZhbHVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxheShtcykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcclxuICAgICAgICB9LCBtcyk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiB1bnBhdXNlKCkge1xyXG4gICAgcGF1c2UgPSBmYWxzZTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBwYXVzZVVudGlsKGVsZW1lbnQpIHtcclxuICAgIHdoaWxlIChwYXVzZSkge1xyXG4gICAgICAgIGF3YWl0IGRlbGF5KDEwMCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJChlbGVtZW50KS52YWwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5jcnlwdEZvcm1EYXRhKGRhdGEpIHtcclxuICAgIGxldCBwdWJsaWNLZXk7XHJcbn1cclxuIl19
