"use strict";function asyncGeneratorStep(t,e,r,n,o,a,c){try{var i=t[a](c),s=i.value}catch(t){return void r(t)}i.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(i){return function(){var t=this,c=arguments;return new Promise(function(e,r){var n=i.apply(t,c);function o(t){asyncGeneratorStep(n,e,r,o,a,"next",t)}function a(t){asyncGeneratorStep(n,e,r,o,a,"throw",t)}o(void 0)})}}jQuery(function(y){var w;document.querySelector("#clickMe").addEventListener("click",r),document.querySelector("#clickMe1").addEventListener("click",r),document.querySelector("#closePopup").addEventListener("click",function(){e.attr("style","margin-right:0px"),t.removeClass("fade-in").addClass("fade-out"),t.attr("style","visibility:hidden"),y("body").css({overflow:"auto"})});var t=y("#popup"),e=y(".popup-inner");function r(){e.attr("style","margin-right:20px"),t.removeClass("fade-out").addClass("fade-in"),t.attr("style","visibility:visible"),y("body").css({overflow:"hidden"}),o()}var n,x={name:"",email:"",phone:"",portfolioSize:""},o=(n=!1,_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=36;break}return n=!0,t.next=4,a({text:"Our book has been requested over NaN times!",style:"text",writer:"bot"});case 4:return t.next=6,a({text:"All we need some information to determine whether this book suits your needs.",style:"text",writer:"bot"});case 6:return t.next=8,a({text:"First of all, what is your name?",style:"form",field:"name",writer:"bot"});case 8:return x.name=t.sent,t.next=11,a({text:x.name,style:"text",writer:"user"});case 11:return t.next=13,a({text:"Great! Nice to meet you ".concat(x.name,"!"),style:"text",writer:"bot"});case 13:return t.next=15,a({text:"Before we go any further, we want you to know we take your data VERY seriously.",style:"text",writer:"bot"});case 15:return t.next=17,a({text:"<a href=".concat("http://integrityfinancialservicellc.com/wp-content/uploads/2015/05/IFS-Privacy-Pledge-and-Notification.pdf",' target="_blank">Here</a> is our privacy policy.'),style:"text",writer:"bot"});case 17:return t.next=19,a({text:"What's a good phone number to reach you at? (We won't spam you; only a one time confirmation)",style:"form",field:"phone",writer:"bot"});case 19:return x.phone=t.sent,t.next=22,a({text:x.phone,style:"text",writer:"user"});case 22:return t.next=24,a({text:"Great! And what is a good email we can send your book to? (Again, we won't spam you)",style:"form",field:"email",writer:"bot"});case 24:return x.email=t.sent,t.next=27,a({text:"".concat(x.email),style:"text",writer:"user"});case 27:return t.next=29,a({text:"Perfect ".concat(x.name,". What would best describe the amount of investable assets you have saved for retirement? (We customize the information we send based on your situation)"),style:"portfolio",writer:"bot"});case 29:return x.portfolioSize=t.sent,t.next=32,a({text:"".concat(x.portfolioSize),style:"text",writer:"user"});case 32:return t.next=34,a({text:"Great ".concat(x.name,", one last thing.  We need to make sure you're a real person!  Solve the captcha below and we'll get that book sent over to you!"),style:"text",writer:"bot"});case 34:return t.next=36,a({text:x.email,style:"captcha",writer:"bot"});case 36:case"end":return t.stop()}},t)})));function a(){return c.apply(this,arguments)}function c(){return(c=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var r,n,o,a,c,i,s,u,l,d,p,m,b,f,h,v,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:y(".row-current").removeClass("row-current"),y("#bot-chat-current").removeAttr("id"),y("#user-chat-current").removeAttr("id"),y("#left-tag-current").removeAttr("id"),y("#right-tag-current").removeAttr("id"),y("#popup-window").append('<div class="row align-items-center chat-row row-current"> \t\t\t\t\t\t<div class="col-md-1 col-xl-2 padding-column"> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div id="left-tag-current" class="col-2 col-sm-1 logo-column"> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="col-8 col-sm-10 col-md-8 col-xl-6 content-column"> \t\t\t\t\t\t\t<div id="bot-chat-current" class="chat-bubble bot chat-fade-in"> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t<div id="user-chat-current" class="chat-bubble user float-right chat-fade-in"> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div id="right-tag-current" class="col-2 col-sm-1 logo-column"> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="col-md-1 col-xl-2 padding-column"> \t\t\t\t\t\t</div> \t\t\t\t\t</div>'),"bot"===e.writer?(r=1<y(".chat-row").length?'<img id="bot-logo-current" src="images/IFSLogo.png" class="bot-logo logo-pop-in">':'<img id="bot-logo-current" src="images/IFSLogo.png" class="bot-logo">',y("#right-tag-current").append('<div id="bot-clock-current" class="bot-clock"></div>')):y("#left-tag-current").append('<div id="user-clock-current" class="user-clock"></div>'),s=new Date,s=s.getHours()+":"+s.getMinutes()+":"+s.getSeconds(),"bot"===e.writer?(n=y("#bot-chat-current"),o=y("#bot-clock-current"),c=y("#user-chat-current"),a=y("#user-clock-current"),i='<div class="clock-text bot-clock-text">'+s+"</div>",y(".bot.last").removeClass("last")):(n=y("#user-chat-current"),o=y("#user-clock-current"),c=y("#bot-chat-current"),a=y("#bot-clock-current"),y(".row-current").addClass("height-shift"),i='<div class="clock-text user-clock-text" style="height:100%;max-height:100%">'+s+"</div>",y(".user.last").removeClass("last")),n.addClass("last"),a.remove(),c.remove(),o.append(i),o.removeAttr("id"),t.t0=e.style,t.next="text"===t.t0?19:"form"===t.t0?22:"portfolio"===t.t0?38:"captcha"===t.t0?48:52;break;case 19:return n.append('<p class="chat-text">'.concat(e.text,"</p>")),u=k(1e3),t.abrupt("break",52);case 22:t.t1=e.field,t.next="name"===t.t1?25:"phone"===t.t1?27:"email"===t.t1?29:31;break;case 25:return l="text",t.abrupt("break",31);case 27:return l="tel",t.abrupt("break",31);case 29:return l="email",t.abrupt("break",31);case 31:return n.append('<p class="chat-text">'+e.text+'</p><div class="input-group mb-3"> \t\t\t<input type="'.concat(l,'" id="').concat(e.field,'-input" class="form-control" placeholder="Your ').concat(e.field,'" aria-label="Your ').concat(e.field,'" aria-describedby="').concat(e.field,'-submit">  \n  \t\t\t<div class="input-group-append"> \t\t\t<span class="input-group-text" id="').concat(e.field,'-submit"> ok</span></div></div>')),d=y("#".concat(e.field,"-submit")),w=!0,y("#".concat(e.field,"-input")).on("keypress",function(t){"Enter"===t.key&&d.trigger("click")}),d.on("click",A),u=S("#".concat(e.field,"-input"),function(t){return t.val()}),t.abrupt("break",52);case 38:for(n.append('<p class="chat-text">'+e.text+"</p>"),g=["Less than $100,000 of investable assets saved for retirement","Between $100,000 and $250,000 of investable assets saved for retirement","Between $250,000 and $500,000 of investable assets saved for retirement","Between $500,000 and $1,000,000 of investable assets saved for retirement","Over $1,000,000 of investable assets saved for retirement"],n.append('<div class="portfolio-selection">'),p=y(".portfolio-selection"),m=0,b=g;m<b.length;m++)f=b[m],p.append('<button type="button" class="btn btn-light portfolio-button">'.concat(f,"</button>"));return p.on("click","button",function(){y(this).attr("id","portfolio-size"),A()}),n.append("</div>"),w=!0,u=S("#portfolio-size",function(t){return t.text()}),t.abrupt("break",52);case 48:return n.append('<p class="chat-text">'+e.text+"</p>"),n.append('<button id="submit-button" \n            class="g-recaptcha btn btn-light" \n        data-sitekey="reCAPTCHA_site_key" \n        data-callback="onSubmit" \n        data-action="submit">Submit</button>'),y("#submit-button").on("click",_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:grecaptcha.ready(function(){grecaptcha.execute("6Ld4LyQaAAAAAAcJgIAMJQCQ3B-ArchznBkWR7A9",{action:"submit"}).then(function(t){var e=new XMLHttpRequest;e.open("POST","https://us-south.functions.appdomain.cloud/api/v1/web/dwstanley%40integrityfinancialservicellc.com_dev/mysite/contactus",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onload=function(){return console.log(e.status)},e.send("name=".concat(x.name,"&phone=").concat(x.phone,"&email=").concat(x.email,"&portfolioSize=").concat(x.portfolioSize,"&token=").concat(t))})});case 1:case"end":return t.stop()}},t)}))),t.abrupt("break",52);case 52:return"bot"===e.writer&&(1<y(".content-column").length&&(h=y(".row-current").height()/2+y("#last-bot-row").height()/2,0!==(v=y(".height-shift")).length&&v.each(function(){h+=y(this).height()}),y("#bot-logo-current").velocity({top:h},{duration:400,easing:"easeInQuad",complete:function(t){setTimeout(function(){y(t).css("visibility","hidden").removeAttr("id"),v.removeClass("height-shift")},300)}}),y("#last-bot-row").removeAttr("id"),y("#bot-logo-current").removeAttr("id"),y("bot-logo").last().attr("id","bot-logo-current")),y("#left-tag-current").append(r),y(".row-current").attr("id","last-bot-row")),g=y(".row-current").css("height"),y("#popup-window").css("height","+=".concat(g)),t.next=57,u;case 57:return t.abrupt("return",t.sent);case 58:case"end":return t.stop()}},t)}))).apply(this,arguments)}function k(r){return new Promise(function(t,e){setTimeout(function(){t(null)},r)})}function A(){w=!1}function S(){return i.apply(this,arguments)}function i(){return(i=_asyncToGenerator(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(w)return t.next=3,k(100);t.next=5;break;case 3:t.next=0;break;case 5:return t.abrupt("return",r(y(e)));case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsialF1ZXJ5IiwiJCIsInBhdXNlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9wZW5Qb3B1cCIsIm92ZXJmbG93IiwiYXR0ciIsImVsIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImNoYXRib3QiLCJjc3MiLCJpbm5lciIsImV4ZWN1dGVkIiwiZmllbGRzIiwibmFtZSIsImVtYWlsIiwicGhvbmUiLCJwb3J0Zm9saW9TaXplIiwiX2NhbGxlZSIsInJlZ2VuZXJhdG9yUnVudGltZSIsIndyYXAiLCJfY29udGV4dCIsInByZXYiLCJuZXh0Iiwid3JpdGVUZXh0IiwidGV4dCIsInN0eWxlIiwid3JpdGVyIiwic2VudCIsImNvbmNhdCIsImZpZWxkIiwic3RvcCIsIl93cml0ZVRleHQiLCJhcHBseSIsInRoaXMiLCJhcmd1bWVudHMiLCJfYXN5bmNUb0dlbmVyYXRvciIsIm1hcmsiLCJvcHRpb25zIiwicmVtb3ZlQXR0ciIsImFwcGVuZCIsImxvZ29UZXh0IiwibGVuZ3RoIiwiZCIsIkRhdGUiLCJ0aW1lIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsImNsb2NrVG9SZW1vdmUiLCJjbG9ja1RleHQiLCJjaGF0IiwiY2xvY2siLCJjaGF0VG9SZW1vdmUiLCJyZW1vdmUiLCJidWJibGVIVE1MIiwicmV0dXJuVmFsdWUiLCJkZWxheSIsImlucHV0VHlwZSIsImUiLCJrZXkiLCJnbyIsInRyaWdnZXIiLCJvbiIsInVucGF1c2UiLCJ2YWx1ZSIsInZhbCIsInNlbGVjdGlvbiIsIl9pIiwiX3NpemVzIiwic2l6ZXMiLCJzaXplIiwicGF1c2VVbnRpbCIsIl9jYWxsZWUyIiwiX2NvbnRleHQyIiwiZ3JlY2FwdGNoYSIsInJlYWR5IiwiZXhlY3V0ZSIsImFjdGlvbiIsInRoZW4iLCJ0b2tlbiIsInhtbGh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJjb25zb2xlIiwibG9nIiwic3RhdHVzIiwic2VuZCIsImhlaWdodCIsInJvd3NUb1NoaWZ0IiwiZWFjaCIsImxvZ29TaGlmdERvd24iLCJ2ZWxvY2l0eSIsImVhc2luZyIsImNvbXBsZXRlIiwiZWxlbWVudCIsInNldFRpbWVvdXQiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiX3BhdXNlVW50aWwiLCJfY2FsbGVlNCIsImZuIiwiX2NvbnRleHQ0IiwiYWJydXB0Il0sIm1hcHBpbmdzIjoiMFlBRUFBLE9BQU8sU0FBVUMsR0FDYixJQUFJQyxFQUNKQyxTQUFTQyxjQUFjLFlBQVlDLGlCQUFpQixRQUFTQyxHQUM3REgsU0FBU0MsY0FBYyxhQUFhQyxpQkFBaUIsUUFBU0MsR0FIbEVOLFNBQU9JLGNBQWEsZUFBQUMsaUJBQUEsUUFZWkosV0FBZ0JNLEVBQVFDLEtBQUUsUUFBQSxvQkFBMUJDLEVBQUFDLFlBQUEsV0FBQUMsU0FBQSxZQUNBQyxFQUFPSixLQUFBLFFBQUEscUJBUVBQLEVBQUUsUUFBUVksSUFBSSxDQUFFTixTQUFVLFdBcEI5QixJQUFJTCxFQUFKRCxFQUFBLFVBQ0FFLEVBQVNDLEVBQUFBLGdCQUVURCxTQUFTQyxJQUNIVSxFQUFLTixLQUFBLFFBQVgscUJBQ0lNLEVBQUtKLFlBQUssWUFBZEMsU0FBQSxXQUtJRixFQUFHRCxLQUFLLFFBQVMsc0JBSHJCUCxFQUFBLFFBQVNLLElBQVQsQ0FBcUJDLFNBQUEsV0FDakJPLElBWUFiLElBUVNjLEVBUFRDLEVBQUEsQ0FDSEMsS0FBQSxHQUVEQyxNQUFBLEdBQ0pDLE1BQUEsR0FPUUMsY0FBZSxJQUpmSixHQUFTRCxHQUFBLEVBRVRHLGtCQUFBQSxtQkFBQUEsS0FGUyxTQUFBRyxJQUFBLE9BQUFDLG1CQUFBQyxLQUFBLFNBQUFDLEdBQUEsT0FBQSxPQUFBQSxFQUFBQyxLQUFBRCxFQUFBRSxNQUFBLEtBQUEsRUFBQSxHQUFBWCxFQUFBLENBQUFTLEVBQUFFLEtBQUEsR0FBQSxNQUFBLE9BSVROLEdBQWUsRUFKTkks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QUEsTUFBQUEsT0FBQUEsRUFBQUEsU0FBQUEsT0ExRkFNLE1BQUFDLEtBQUFDLFdBd1I0QixTQUFBc0IsRUFBQXlDLEdBQUEsT0FBQSxJQUFBQyxRQUFBLFNBQUFDLEVBQUFDLEdBQUFKLFdBQUEsV0FBQUcsRUFBQSxPQUFBRixLQXhKNUMsU0FBQWxDLElBdU9JakUsR0FBUSxFQXZXSSxTQWtUUnVDLElBbFRRLE9BQUFnRSxFQUFBckUsTUFBQUMsS0FBQUMsV0FBQSxTQUFBbUUsSUFBQSxPQUFBQSxFQUFBbEUsa0JBQUFqQixtQkFBQWtCLEtBa1RaLFNBQUFrRSxFQUFZNUUsRUFBVzZFLEdBQXZCLE9BQUFyRixtQkFBQUMsS0FBQSxTQUFBcUYsR0FBQSxPQUFBLE9BQUFBLEVBQUFuRixLQUFBbUYsRUFBQWxGLE1BQUEsS0FBQSxFQUFBLEdBQ0l4QixFQURKLE9BQUEwRyxFQUFBbEYsS0FBQSxFQUVZcUUsRUFBQUEsS0FGWmEsRUFBQWxGLEtBQUEsRUFBQSxNQUFBLEtBQUEsRUFBQWtGLEVBQUFsRixLQUFBLEVBQUEsTUFBQSxLQUFBLEVBQUEsT0FBQWtGLEVBQUFDLE9BQUEsU0EyRE9GLEVBQUcxRyxFQUFFa0csS0EzRFosS0FBQSxFQUFBLElBQUEsTUFBQSxPQUFBUyxFQUFBMUUsU0FBQXdFLE9BbFRZdEUsTUFBQUMsS0FBQUMiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxualF1ZXJ5KGZ1bmN0aW9uICgkKSB7XHJcbiAgICB2YXIgcGF1c2U7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NsaWNrTWVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qb3B1cCk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NsaWNrTWUxXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUG9wdXApO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjbG9zZVBvcHVwXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVBvcHVwKTtcclxuICAgIGxldCBlbCA9ICQoXCIjcG9wdXBcIik7XHJcbiAgICBsZXQgaW5uZXIgPSAkKFwiLnBvcHVwLWlubmVyXCIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIG9wZW5Qb3B1cCgpIHtcclxuICAgICAgICBpbm5lci5hdHRyKFwic3R5bGVcIiwgXCJtYXJnaW4tcmlnaHQ6MjBweFwiKTtcclxuICAgICAgICBlbC5yZW1vdmVDbGFzcyhcImZhZGUtb3V0XCIpLmFkZENsYXNzKFwiZmFkZS1pblwiKTtcclxuICAgICAgICBlbC5hdHRyKFwic3R5bGVcIiwgXCJ2aXNpYmlsaXR5OnZpc2libGVcIik7XHJcbiAgICAgICAgJChcImJvZHlcIikuY3NzKHsgb3ZlcmZsb3c6IFwiaGlkZGVuXCIgfSk7XHJcbiAgICAgICAgY2hhdGJvdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsb3NlUG9wdXAoKSB7XHJcbiAgICAgICAgaW5uZXIuYXR0cihcInN0eWxlXCIsIFwibWFyZ2luLXJpZ2h0OjBweFwiKTtcclxuICAgICAgICBlbC5yZW1vdmVDbGFzcyhcImZhZGUtaW5cIikuYWRkQ2xhc3MoXCJmYWRlLW91dFwiKTtcclxuICAgICAgICBlbC5hdHRyKFwic3R5bGVcIiwgXCJ2aXNpYmlsaXR5OmhpZGRlblwiKTtcclxuICAgICAgICAvLyBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPj0gNzY4KSB7XHJcbiAgICAgICAgJChcImJvZHlcIikuY3NzKHsgb3ZlcmZsb3c6IFwiYXV0b1wiIH0pO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuXHJcbiAgICAvKkdldCBleGlzdGluZyByb3cgaGVpZ2h0LCBhZGQgMXJlbSBmb3IgZXZlcnkgdGltZSBjaGF0LWJ1YmJsZSB0ZXh0IHdpbGwgd3JhcCwgYW5pbWF0ZSBib3QtbG9nbydzIHNoaWZ0IGRvd24gd2l0aCB0b3A6XHJcbiAgICAgIG1vdmUgYm90LWxvZ28gdG8gbmV3IHJvdyBhZnRlciBhbmltYXRpb24gdGltZW91dCovXHJcbiAgICBsZXQgcHJpdmFjeUxpbmsgPVxyXG4gICAgICAgIFwiaHR0cDovL2ludGVncml0eWZpbmFuY2lhbHNlcnZpY2VsbGMuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE1LzA1L0lGUy1Qcml2YWN5LVBsZWRnZS1hbmQtTm90aWZpY2F0aW9uLnBkZlwiO1xyXG4gICAgbGV0IGZpZWxkcyA9IHtcclxuICAgICAgICBuYW1lOiBcIlwiLFxyXG4gICAgICAgIGVtYWlsOiBcIlwiLFxyXG4gICAgICAgIHBob25lOiBcIlwiLFxyXG4gICAgICAgIHBvcnRmb2xpb1NpemU6IFwiXCIsXHJcbiAgICB9O1xyXG5cclxuICAgIGxldCBjaGF0Ym90ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgZXhlY3V0ZWQgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gYXN5bmMgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWV4ZWN1dGVkKSB7XHJcbiAgICAgICAgICAgICAgICBleGVjdXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFwiT3VyIGJvb2sgaGFzIGJlZW4gcmVxdWVzdGVkIG92ZXIgTmFOIHRpbWVzIVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBbGwgd2UgbmVlZCBzb21lIGluZm9ybWF0aW9uIHRvIGRldGVybWluZSB3aGV0aGVyIHRoaXMgYm9vayBzdWl0cyB5b3VyIG5lZWRzLlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZpZWxkcy5uYW1lID0gYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIkZpcnN0IG9mIGFsbCwgd2hhdCBpcyB5b3VyIG5hbWU/XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFwiZm9ybVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBcIm5hbWVcIixcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogZmllbGRzLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlcjogXCJ1c2VyXCIsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYEdyZWF0ISBOaWNlIHRvIG1lZXQgeW91ICR7ZmllbGRzLm5hbWV9IWAsXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlcjogXCJib3RcIixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkJlZm9yZSB3ZSBnbyBhbnkgZnVydGhlciwgd2Ugd2FudCB5b3UgdG8ga25vdyB3ZSB0YWtlIHlvdXIgZGF0YSBWRVJZIHNlcmlvdXNseS5cIixcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGA8YSBocmVmPSR7cHJpdmFjeUxpbmt9IHRhcmdldD1cIl9ibGFua1wiPkhlcmU8L2E+IGlzIG91ciBwcml2YWN5IHBvbGljeS5gLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBmaWVsZHMucGhvbmUgPSBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiV2hhdCdzIGEgZ29vZCBwaG9uZSBudW1iZXIgdG8gcmVhY2ggeW91IGF0PyAoV2Ugd29uJ3Qgc3BhbSB5b3U7IG9ubHkgYSBvbmUgdGltZSBjb25maXJtYXRpb24pXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFwiZm9ybVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBcInBob25lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGZpZWxkcy5waG9uZSxcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyOiBcInVzZXJcIixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZmllbGRzLmVtYWlsID0gYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkdyZWF0ISBBbmQgd2hhdCBpcyBhIGdvb2QgZW1haWwgd2UgY2FuIHNlbmQgeW91ciBib29rIHRvPyAoQWdhaW4sIHdlIHdvbid0IHNwYW0geW91KVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBcImZvcm1cIixcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZDogXCJlbWFpbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlcjogXCJib3RcIixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgJHtmaWVsZHMuZW1haWx9YCxcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyOiBcInVzZXJcIixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZmllbGRzLnBvcnRmb2xpb1NpemUgPSBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGBQZXJmZWN0ICR7ZmllbGRzLm5hbWV9LiBXaGF0IHdvdWxkIGJlc3QgZGVzY3JpYmUgdGhlIGFtb3VudCBvZiBpbnZlc3RhYmxlIGFzc2V0cyB5b3UgaGF2ZSBzYXZlZCBmb3IgcmV0aXJlbWVudD8gKFdlIGN1c3RvbWl6ZSB0aGUgaW5mb3JtYXRpb24gd2Ugc2VuZCBiYXNlZCBvbiB5b3VyIHNpdHVhdGlvbilgLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInBvcnRmb2xpb1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlcjogXCJib3RcIixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgJHtmaWVsZHMucG9ydGZvbGlvU2l6ZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXI6IFwidXNlclwiLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGBHcmVhdCAke2ZpZWxkcy5uYW1lfSwgb25lIGxhc3QgdGhpbmcuICBXZSBuZWVkIHRvIG1ha2Ugc3VyZSB5b3UncmUgYSByZWFsIHBlcnNvbiEgIFNvbHZlIHRoZSBjYXB0Y2hhIGJlbG93IGFuZCB3ZSdsbCBnZXQgdGhhdCBib29rIHNlbnQgb3ZlciB0byB5b3UhYCxcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGZpZWxkcy5lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogXCJjYXB0Y2hhXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSkoKTtcclxuXHJcbiAgICBhc3luYyBmdW5jdGlvbiB3cml0ZVRleHQob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IGJ1YmJsZUhUTUwgPVxyXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cInJvdyBhbGlnbi1pdGVtcy1jZW50ZXIgY2hhdC1yb3cgcm93LWN1cnJlbnRcIj4gXFxcclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbC1tZC0xIGNvbC14bC0yIHBhZGRpbmctY29sdW1uXCI+IFxcXHJcblx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGlkPVwibGVmdC10YWctY3VycmVudFwiIGNsYXNzPVwiY29sLTIgY29sLXNtLTEgbG9nby1jb2x1bW5cIj4gXFxcclxuXHRcdFx0XHRcdFx0PC9kaXY+IFxcXHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb2wtOCBjb2wtc20tMTAgY29sLW1kLTggY29sLXhsLTYgY29udGVudC1jb2x1bW5cIj4gXFxcclxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGlkPVwiYm90LWNoYXQtY3VycmVudFwiIGNsYXNzPVwiY2hhdC1idWJibGUgYm90IGNoYXQtZmFkZS1pblwiPiBcXFxyXG5cdFx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHRcdDxkaXYgaWQ9XCJ1c2VyLWNoYXQtY3VycmVudFwiIGNsYXNzPVwiY2hhdC1idWJibGUgdXNlciBmbG9hdC1yaWdodCBjaGF0LWZhZGUtaW5cIj4gXFxcclxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj4gXFxcclxuXHRcdFx0XHRcdFx0PC9kaXY+IFxcXHJcblx0XHRcdFx0XHRcdDxkaXYgaWQ9XCJyaWdodC10YWctY3VycmVudFwiIGNsYXNzPVwiY29sLTIgY29sLXNtLTEgbG9nby1jb2x1bW5cIj4gXFxcclxuXHRcdFx0XHRcdFx0PC9kaXY+IFxcXHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb2wtbWQtMSBjb2wteGwtMiBwYWRkaW5nLWNvbHVtblwiPiBcXFxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj4gXFxcclxuXHRcdFx0XHRcdDwvZGl2Pic7XHJcblxyXG4gICAgICAgICQoXCIucm93LWN1cnJlbnRcIikucmVtb3ZlQ2xhc3MoXCJyb3ctY3VycmVudFwiKTtcclxuICAgICAgICAkKFwiI2JvdC1jaGF0LWN1cnJlbnRcIikucmVtb3ZlQXR0cihcImlkXCIpO1xyXG4gICAgICAgICQoXCIjdXNlci1jaGF0LWN1cnJlbnRcIikucmVtb3ZlQXR0cihcImlkXCIpO1xyXG4gICAgICAgICQoXCIjbGVmdC10YWctY3VycmVudFwiKS5yZW1vdmVBdHRyKFwiaWRcIik7XHJcbiAgICAgICAgJChcIiNyaWdodC10YWctY3VycmVudFwiKS5yZW1vdmVBdHRyKFwiaWRcIik7XHJcblxyXG4gICAgICAgIGxldCBsb2dvVGV4dDtcclxuICAgICAgICAkKFwiI3BvcHVwLXdpbmRvd1wiKS5hcHBlbmQoYnViYmxlSFRNTCk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMud3JpdGVyID09PSBcImJvdFwiKSB7XHJcbiAgICAgICAgICAgIGlmICgkKFwiLmNoYXQtcm93XCIpLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIGxvZ29UZXh0ID1cclxuICAgICAgICAgICAgICAgICAgICAnPGltZyBpZD1cImJvdC1sb2dvLWN1cnJlbnRcIiBzcmM9XCJpbWFnZXMvSUZTTG9nby5wbmdcIiBjbGFzcz1cImJvdC1sb2dvIGxvZ28tcG9wLWluXCI+JztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxvZ29UZXh0ID1cclxuICAgICAgICAgICAgICAgICAgICAnPGltZyBpZD1cImJvdC1sb2dvLWN1cnJlbnRcIiBzcmM9XCJpbWFnZXMvSUZTTG9nby5wbmdcIiBjbGFzcz1cImJvdC1sb2dvXCI+JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKFwiI3JpZ2h0LXRhZy1jdXJyZW50XCIpLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICc8ZGl2IGlkPVwiYm90LWNsb2NrLWN1cnJlbnRcIiBjbGFzcz1cImJvdC1jbG9ja1wiPjwvZGl2PidcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKFwiI2xlZnQtdGFnLWN1cnJlbnRcIikuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgJzxkaXYgaWQ9XCJ1c2VyLWNsb2NrLWN1cnJlbnRcIiBjbGFzcz1cInVzZXItY2xvY2tcIj48L2Rpdj4nXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY2hhdCwgY2xvY2ssIGNsb2NrVG9SZW1vdmUsIGNoYXRUb1JlbW92ZSwgY2xvY2tUZXh0O1xyXG4gICAgICAgIGxldCBkID0gbmV3IERhdGUoKTtcclxuICAgICAgICBsZXQgdGltZSA9IGQuZ2V0SG91cnMoKSArIFwiOlwiICsgZC5nZXRNaW51dGVzKCkgKyBcIjpcIiArIGQuZ2V0U2Vjb25kcygpO1xyXG5cclxuICAgICAgICBpZiAob3B0aW9ucy53cml0ZXIgPT09IFwiYm90XCIpIHtcclxuICAgICAgICAgICAgY2hhdCA9ICQoXCIjYm90LWNoYXQtY3VycmVudFwiKTtcclxuICAgICAgICAgICAgY2xvY2sgPSAkKFwiI2JvdC1jbG9jay1jdXJyZW50XCIpO1xyXG4gICAgICAgICAgICBjaGF0VG9SZW1vdmUgPSAkKFwiI3VzZXItY2hhdC1jdXJyZW50XCIpO1xyXG4gICAgICAgICAgICBjbG9ja1RvUmVtb3ZlID0gJChcIiN1c2VyLWNsb2NrLWN1cnJlbnRcIik7XHJcbiAgICAgICAgICAgIGNsb2NrVGV4dCA9ICc8ZGl2IGNsYXNzPVwiY2xvY2stdGV4dCBib3QtY2xvY2stdGV4dFwiPicgKyB0aW1lICsgXCI8L2Rpdj5cIjtcclxuICAgICAgICAgICAgJChcIi5ib3QubGFzdFwiKS5yZW1vdmVDbGFzcyhcImxhc3RcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2hhdCA9ICQoXCIjdXNlci1jaGF0LWN1cnJlbnRcIik7XHJcbiAgICAgICAgICAgIGNsb2NrID0gJChcIiN1c2VyLWNsb2NrLWN1cnJlbnRcIik7XHJcbiAgICAgICAgICAgIGNoYXRUb1JlbW92ZSA9ICQoXCIjYm90LWNoYXQtY3VycmVudFwiKTtcclxuICAgICAgICAgICAgY2xvY2tUb1JlbW92ZSA9ICQoXCIjYm90LWNsb2NrLWN1cnJlbnRcIik7XHJcbiAgICAgICAgICAgICQoXCIucm93LWN1cnJlbnRcIikuYWRkQ2xhc3MoXCJoZWlnaHQtc2hpZnRcIik7XHJcbiAgICAgICAgICAgIGNsb2NrVGV4dCA9XHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNsb2NrLXRleHQgdXNlci1jbG9jay10ZXh0XCIgc3R5bGU9XCJoZWlnaHQ6MTAwJTttYXgtaGVpZ2h0OjEwMCVcIj4nICtcclxuICAgICAgICAgICAgICAgIHRpbWUgK1xyXG4gICAgICAgICAgICAgICAgXCI8L2Rpdj5cIjtcclxuICAgICAgICAgICAgJChcIi51c2VyLmxhc3RcIikucmVtb3ZlQ2xhc3MoXCJsYXN0XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGF0LmFkZENsYXNzKFwibGFzdFwiKTtcclxuICAgICAgICBjbG9ja1RvUmVtb3ZlLnJlbW92ZSgpO1xyXG4gICAgICAgIGNoYXRUb1JlbW92ZS5yZW1vdmUoKTtcclxuICAgICAgICBjbG9jay5hcHBlbmQoY2xvY2tUZXh0KTtcclxuICAgICAgICBjbG9jay5yZW1vdmVBdHRyKFwiaWRcIik7XHJcbiAgICAgICAgbGV0IHJldHVyblZhbHVlO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKG9wdGlvbnMuc3R5bGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcInRleHRcIjpcclxuICAgICAgICAgICAgICAgIGNoYXQuYXBwZW5kKGA8cCBjbGFzcz1cImNoYXQtdGV4dFwiPiR7b3B0aW9ucy50ZXh0fTwvcD5gKTtcclxuICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gZGVsYXkoMTAwMCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImZvcm1cIjpcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dFR5cGU7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2gob3B0aW9ucy5maWVsZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuYW1lXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VHlwZSA9IFwidGV4dFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJwaG9uZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFR5cGUgPSBcInRlbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbWFpbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFR5cGUgPSBcImVtYWlsXCJcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjaGF0LmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJjaGF0LXRleHRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnRleHQgK1xyXG4gICAgICAgICAgICAgICAgICAgIGA8L3A+PGRpdiBjbGFzcz1cImlucHV0LWdyb3VwIG1iLTNcIj4gXFxcclxuXHRcdFx0PGlucHV0IHR5cGU9XCIke2lucHV0VHlwZX1cIiBpZD1cIiR7b3B0aW9ucy5maWVsZH0taW5wdXRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHBsYWNlaG9sZGVyPVwiWW91ciAke29wdGlvbnMuZmllbGR9XCIgYXJpYS1sYWJlbD1cIllvdXIgJHtvcHRpb25zLmZpZWxkfVwiIGFyaWEtZGVzY3JpYmVkYnk9XCIke29wdGlvbnMuZmllbGR9LXN1Ym1pdFwiPiBcXCBcclxuICBcdFx0XHQ8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAtYXBwZW5kXCI+IFxcXHJcblx0XHRcdDxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtdGV4dFwiIGlkPVwiJHtvcHRpb25zLmZpZWxkfS1zdWJtaXRcIj4gb2s8L3NwYW4+PC9kaXY+PC9kaXY+YFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgZ28gPSAkKGAjJHtvcHRpb25zLmZpZWxkfS1zdWJtaXRgKTtcclxuICAgICAgICAgICAgICAgIHBhdXNlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKGAjJHtvcHRpb25zLmZpZWxkfS1pbnB1dGApLm9uKFwia2V5cHJlc3NcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnby50cmlnZ2VyKFwiY2xpY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBnby5vbihcImNsaWNrXCIsIHVucGF1c2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBwYXVzZVVudGlsKGAjJHtvcHRpb25zLmZpZWxkfS1pbnB1dGAsICh2YWx1ZSkgPT5cclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS52YWwoKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInBvcnRmb2xpb1wiOlxyXG4gICAgICAgICAgICAgICAgY2hhdC5hcHBlbmQoJzxwIGNsYXNzPVwiY2hhdC10ZXh0XCI+JyArIG9wdGlvbnMudGV4dCArIFwiPC9wPlwiKTtcclxuICAgICAgICAgICAgICAgIGxldCBzaXplcyA9IFtcclxuICAgICAgICAgICAgICAgICAgICBcIkxlc3MgdGhhbiAkMTAwLDAwMCBvZiBpbnZlc3RhYmxlIGFzc2V0cyBzYXZlZCBmb3IgcmV0aXJlbWVudFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiQmV0d2VlbiAkMTAwLDAwMCBhbmQgJDI1MCwwMDAgb2YgaW52ZXN0YWJsZSBhc3NldHMgc2F2ZWQgZm9yIHJldGlyZW1lbnRcIixcclxuICAgICAgICAgICAgICAgICAgICBcIkJldHdlZW4gJDI1MCwwMDAgYW5kICQ1MDAsMDAwIG9mIGludmVzdGFibGUgYXNzZXRzIHNhdmVkIGZvciByZXRpcmVtZW50XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJCZXR3ZWVuICQ1MDAsMDAwIGFuZCAkMSwwMDAsMDAwIG9mIGludmVzdGFibGUgYXNzZXRzIHNhdmVkIGZvciByZXRpcmVtZW50XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJPdmVyICQxLDAwMCwwMDAgb2YgaW52ZXN0YWJsZSBhc3NldHMgc2F2ZWQgZm9yIHJldGlyZW1lbnRcIixcclxuICAgICAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICAgICAgY2hhdC5hcHBlbmQoJzxkaXYgY2xhc3M9XCJwb3J0Zm9saW8tc2VsZWN0aW9uXCI+Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0aW9uID0gJChcIi5wb3J0Zm9saW8tc2VsZWN0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzaXplIG9mIHNpemVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgYDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1saWdodCBwb3J0Zm9saW8tYnV0dG9uXCI+JHtzaXplfTwvYnV0dG9uPmBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uLm9uKFwiY2xpY2tcIiwgXCJidXR0b25cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cihcImlkXCIsIFwicG9ydGZvbGlvLXNpemVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5wYXVzZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjaGF0LmFwcGVuZChcIjwvZGl2PlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBwYXVzZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHBhdXNlVW50aWwoXCIjcG9ydGZvbGlvLXNpemVcIiwgKHZhbHVlKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnRleHQoKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiY2FwdGNoYVwiOlxyXG4gICAgICAgICAgICAgICAgY2hhdC5hcHBlbmQoJzxwIGNsYXNzPVwiY2hhdC10ZXh0XCI+JyArIG9wdGlvbnMudGV4dCArIFwiPC9wPlwiKTtcclxuICAgICAgICAgICAgICAgIGNoYXQuYXBwZW5kKGA8YnV0dG9uIGlkPVwic3VibWl0LWJ1dHRvblwiIFxyXG4gICAgICAgICAgICBjbGFzcz1cImctcmVjYXB0Y2hhIGJ0biBidG4tbGlnaHRcIiBcclxuICAgICAgICBkYXRhLXNpdGVrZXk9XCJyZUNBUFRDSEFfc2l0ZV9rZXlcIiBcclxuICAgICAgICBkYXRhLWNhbGxiYWNrPVwib25TdWJtaXRcIiBcclxuICAgICAgICBkYXRhLWFjdGlvbj1cInN1Ym1pdFwiPlN1Ym1pdDwvYnV0dG9uPmApO1xyXG5cclxuICAgICAgICAgICAgICAgICQoXCIjc3VibWl0LWJ1dHRvblwiKS5vbihcImNsaWNrXCIsIGFzeW5jIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBncmVjYXB0Y2hhLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JlY2FwdGNoYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmV4ZWN1dGUoXCI2TGQ0THlRYUFBQUFBQWNKZ0lBTUpRQ1EzQi1BcmNoem5Ca1dSN0E5XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwic3VibWl0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly91cy1zb3V0aC5mdW5jdGlvbnMuYXBwZG9tYWluLmNsb3VkL2FwaS92MS93ZWIvZHdzdGFubGV5JTQwaW50ZWdyaXR5ZmluYW5jaWFsc2VydmljZWxsYy5jb21fZGV2L215c2l0ZS9jb250YWN0dXNcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4bWxodHRwLm9wZW4oXCJQT1NUXCIsIHVybCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeG1saHR0cC5zZXRSZXF1ZXN0SGVhZGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNvbnRlbnQtdHlwZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4bWxodHRwLm9ubG9hZCA9ICgpID0+IGNvbnNvbGUubG9nKHhtbGh0dHAuc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4bWxodHRwLnNlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBuYW1lPSR7ZmllbGRzLm5hbWV9JnBob25lPSR7ZmllbGRzLnBob25lfSZlbWFpbD0ke2ZpZWxkcy5lbWFpbH0mcG9ydGZvbGlvU2l6ZT0ke2ZpZWxkcy5wb3J0Zm9saW9TaXplfSZ0b2tlbj0ke3Rva2VufWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcHRpb25zLndyaXRlciA9PT0gXCJib3RcIikge1xyXG4gICAgICAgICAgICBpZiAoJChcIi5jb250ZW50LWNvbHVtblwiKS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbG9nb1NoaWZ0RG93biA9XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIi5yb3ctY3VycmVudFwiKS5oZWlnaHQoKSAvIDIgK1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjbGFzdC1ib3Qtcm93XCIpLmhlaWdodCgpIC8gMjtcclxuICAgICAgICAgICAgICAgIGxldCByb3dzVG9TaGlmdCA9ICQoXCIuaGVpZ2h0LXNoaWZ0XCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvd3NUb1NoaWZ0Lmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd3NUb1NoaWZ0LmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dvU2hpZnREb3duICs9ICQodGhpcykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKFwiI2JvdC1sb2dvLWN1cnJlbnRcIikudmVsb2NpdHkoXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGxvZ29TaGlmdERvd24sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA0MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogXCJlYXNlSW5RdWFkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihcImlkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NUb1NoaWZ0LnJlbW92ZUNsYXNzKFwiaGVpZ2h0LXNoaWZ0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgJChcIiNsYXN0LWJvdC1yb3dcIikucmVtb3ZlQXR0cihcImlkXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICQoXCIjYm90LWxvZ28tY3VycmVudFwiKS5yZW1vdmVBdHRyKFwiaWRcIik7XHJcbiAgICAgICAgICAgICAgICAkKFwiYm90LWxvZ29cIikubGFzdCgpLmF0dHIoXCJpZFwiLCBcImJvdC1sb2dvLWN1cnJlbnRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJChcIiNsZWZ0LXRhZy1jdXJyZW50XCIpLmFwcGVuZChsb2dvVGV4dCk7XHJcbiAgICAgICAgICAgICQoXCIucm93LWN1cnJlbnRcIikuYXR0cihcImlkXCIsIFwibGFzdC1ib3Qtcm93XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhlaWdodFNoaWZ0ID0gJChcIi5yb3ctY3VycmVudFwiKS5jc3MoXCJoZWlnaHRcIik7XHJcbiAgICAgICAgJChcIiNwb3B1cC13aW5kb3dcIikuY3NzKFwiaGVpZ2h0XCIsIGArPSR7aGVpZ2h0U2hpZnR9YCk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJldHVyblZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRlbGF5KG1zKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICB9LCBtcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB1bnBhdXNlKCkge1xyXG4gICAgICAgIHBhdXNlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBhc3luYyBmdW5jdGlvbiBwYXVzZVVudGlsKGVsZW1lbnQsIGZuKSB7XHJcbiAgICAgICAgd2hpbGUgKHBhdXNlKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGRlbGF5KDEwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmbigkKGVsZW1lbnQpKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlbmNyeXB0Rm9ybURhdGEoZGF0YSkge1xyXG4gICAgICAgIGxldCBwdWJsaWNLZXk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZnVuY3Rpb24gb25DbGljayhlKSB7XHJcbiAgICAvLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gICAgIGdyZWNhcHRjaGEucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICAgICAgICBncmVjYXB0Y2hhXHJcbiAgICAvLyAgICAgICAgICAgICAuZXhlY3V0ZShcIjZMZDRMeVFhQUFBQUFBY0pnSUFNSlFDUTNCLUFyY2h6bkJrV1I3QTlcIiwge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIGFjdGlvbjogXCJzdWJtaXRcIixcclxuICAgIC8vICAgICAgICAgICAgIH0pXHJcbiAgICAvLyAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICAvLyBBZGQgeW91ciBsb2dpYyB0byBzdWJtaXQgdG8geW91ciBiYWNrZW5kIHNlcnZlciBoZXJlLlxyXG4gICAgLy8gICAgICAgICAgICAgfSk7XHJcbiAgICAvLyAgICAgfSk7XHJcbiAgICAvLyB9XHJcbn0pOyJdfQ==
