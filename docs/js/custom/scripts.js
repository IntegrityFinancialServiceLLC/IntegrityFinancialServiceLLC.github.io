"use strict";function asyncGeneratorStep(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(s){return function(){var t=this,i=arguments;return new Promise(function(e,r){var n=s.apply(t,i);function o(t){asyncGeneratorStep(n,e,r,o,a,"next",t)}function a(t){asyncGeneratorStep(n,e,r,o,a,"throw",t)}o(void 0)})}}var pause;document.querySelector("#clickMe").addEventListener("click",openPopup),document.querySelector("#clickMe1").addEventListener("click",openPopup),document.querySelector("#closePopup").addEventListener("click",closePopup);var el=$("#popup"),inner=$(".popup-inner");function openPopup(){inner.attr("style","margin-right:20px"),el.removeClass("fade-out").addClass("fade-in"),el.attr("style","visibility:visible"),$("body").css({overflow:"hidden"}),chatbot()}function closePopup(){inner.attr("style","margin-right:0px"),el.removeClass("fade-in").addClass("fade-out"),el.attr("style","visibility:hidden"),$("body").css({overflow:"auto"})}var privacyLink="http://integrityfinancialservicellc.com/wp-content/uploads/2015/05/IFS-Privacy-Pledge-and-Notification.pdf",fields={name:"",email:"",phone:"",portfolioSize:""},chatbot=function(){var e=!1;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=35;break}return e=!0,t.next=4,writeText({text:"Our book has been requested over NaN times!",style:"text",writer:"bot"});case 4:return t.next=6,writeText({text:"All we need some information to determine whether this book suits your needs.",style:"text",writer:"bot"});case 6:return t.next=8,writeText({text:"First of all, what is your name?",style:"form",field:"name",writer:"bot"});case 8:return fields.name=t.sent,t.next=11,writeText({text:fields.name,style:"text",writer:"user"});case 11:return t.next=13,writeText({text:"Great! Nice to meet you ".concat(fields.name,"!"),style:"text",writer:"bot"});case 13:return t.next=15,writeText({text:"Before we go any further, we want you to know we take your data VERY seriously.",style:"text",writer:"bot"});case 15:return t.next=17,writeText({text:"<a href=".concat(privacyLink,' target="_blank">Here</a> is our privacy policy.'),style:"text",writer:"bot"});case 17:return t.next=19,writeText({text:"What's a good phone number to reach you at? (We won't spam you; only a one time confirmation)",style:"form",field:"phone",writer:"bot"});case 19:return fields.phone=t.sent,t.next=22,writeText({text:fields.phone,style:"text",writer:"user"});case 22:return t.next=24,writeText({text:"Great! And what is a good email we can send your book to? (Again, we won't spam you)",style:"form",field:"email",writer:"bot"});case 24:return fields.email=t.sent,t.next=27,writeText({text:"".concat(fields.email),style:"text",writer:"user"});case 27:return t.next=29,writeText({text:"Perfect ".concat(fields.name,". What would best describe the amount of investable assets you have saved for retirement? (We customize the information we send based on your situation)"),style:"selection",writer:"bot"});case 29:return t.next=31,writeText({text:"".concat(fields.portfolioSize),style:"text",writer:"user"});case 31:return t.next=33,writeText({text:"Great ".concat(fields.name,", one last thing.  We need to make sure you're a real person!  Solve the captcha below and we'll get that book sent over to you!"),style:"text",writer:"bot"});case 33:return t.next=35,writeText({text:fields.email,style:"captcha",writer:"bot"});case 35:case"end":return t.stop()}},t)}))}();function writeText(t){return _writeText.apply(this,arguments)}function _writeText(){return(_writeText=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var r,n,o,a,i,s,c,l,u,d,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:$(".row-current").removeClass("row-current"),$("#bot-chat-current").removeAttr("id"),$("#user-chat-current").removeAttr("id"),$("#left-tag-current").removeAttr("id"),$("#right-tag-current").removeAttr("id"),$("#popup-window").append('<div class="row align-items-center chat-row row-current"> \t\t\t\t\t\t<div class="col-md-1 col-xl-2 padding-column"> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div id="left-tag-current" class="col-2 col-sm-1 logo-column"> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="col-8 col-sm-10 col-md-8 col-xl-6 content-column"> \t\t\t\t\t\t\t<div id="bot-chat-current" class="chat-bubble bot chat-fade-in"> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t<div id="user-chat-current" class="chat-bubble user float-right chat-fade-in"> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div id="right-tag-current" class="col-2 col-sm-1 logo-column"> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="col-md-1 col-xl-2 padding-column"> \t\t\t\t\t\t</div> \t\t\t\t\t</div>'),"bot"===e.writer?(r=1<$(".chat-row").length?'<img id="bot-logo-current" src="images/IFSLogo.png" class="bot-logo logo-pop-in">':'<img id="bot-logo-current" src="images/IFSLogo.png" class="bot-logo">',$("#right-tag-current").append('<div id="bot-clock-current" class="bot-clock"></div>')):$("#left-tag-current").append('<div id="user-clock-current" class="user-clock"></div>'),l=new Date,l=l.getHours()+":"+l.getMinutes()+":"+l.getSeconds(),"bot"===e.writer?(n=$("#bot-chat-current"),o=$("#bot-clock-current"),i=$("#user-chat-current"),a=$("#user-clock-current"),s='<div class="clock-text bot-clock-text">'+l+"</div>",$(".bot.last").removeClass("last")):(n=$("#user-chat-current"),o=$("#user-clock-current"),i=$("#bot-chat-current"),a=$("#bot-clock-current"),$(".row-current").addClass("height-shift"),s='<div class="clock-text user-clock-text" style="height:100%;max-height:100%">'+l+"</div>",$(".user.last").removeClass("last")),n.addClass("last"),a.remove(),i.remove(),o.append(s),o.removeAttr("id"),t.t0=e.style,t.next="text"===t.t0?19:"form"===t.t0?22:"selection"===t.t0?28:"captcha"===t.t0?31:37;break;case 19:return n.append('<p class="chat-text">'+u.text+"</p>"),c=delay(1e3),t.abrupt("break",37);case 22:return n.append('<p class="chat-text">'+u.text+'</p><div class="input-group mb-3"> \t\t\t<input type="text" id="'.concat(u.field,'-input" class="form-control" placeholder="Your ').concat(u.field,'" aria-label="Your ').concat(u.field,'" aria-describedby="').concat(u.field,'-submit">  \n  \t\t\t<div class="input-group-append"> \t\t\t<span class="input-group-text" id="').concat(u.field,'-submit"> ok</span></div></div>')),l=$("#".concat(u.field,"-submit")),pause=!0,l.on("click",unpause),c=pauseUntil("#".concat(u.field,"-input")),t.abrupt("break",37);case 28:return n.append('<p class="chat-text">'+u.text+"</p>"),u=["Less than $100,000 of investable assets saved for retirement","Between $100,000 and $250,000 of investable assets saved for retirement","Between $250,000 and $500,000 of investable assets saved for retirement","Between $500,000 and $1,000,000 of investable assets saved for retirement","Over $1,000,000 of investable assets saved for retirement"],t.abrupt("break",37);case 31:return n.append('<p class="chat-text">'+u.text+"</p>"),function(){grecaptcha.render("captcha_container",{sitekey:"Your sitekey",callback:function(t){console.log(t)}})}(),pause=!0,c=pauseUntil(),t.abrupt("break",37);case 37:return"bot"===e.writer&&(1<$(".content-column").length&&(d=$(".row-current").height()/2+$("#last-bot-row").height()/2,0!==(p=$(".height-shift")).length&&p.each(function(){d+=$(this).height()}),$("#bot-logo-current").velocity({top:d},{duration:400,easing:"easeInQuad",complete:function(t){setTimeout(function(){$(t).css("visibility","hidden").removeAttr("id"),p.removeClass("height-shift")},300)}}),$("#last-bot-row").removeAttr("id"),$("#bot-logo-current").removeAttr("id"),$("bot-logo").last().attr("id","bot-logo-current")),$("#left-tag-current").append(r),$(".row-current").attr("id","last-bot-row")),t.next=40,c;case 40:return t.abrupt("return",t.sent);case 41:case"end":return t.stop()}},t)}))).apply(this,arguments)}function delay(r){return new Promise(function(t,e){setTimeout(function(){t(null)},r)})}function unpause(){pause=!1}function pauseUntil(t){return _pauseUntil.apply(this,arguments)}function _pauseUntil(){return(_pauseUntil=_asyncToGenerator(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(pause)return t.next=3,delay(100);t.next=5;break;case 3:t.next=0;break;case 5:return t.abrupt("return",$(e).val());case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function encryptFormData(t){}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsicGF1c2UiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwib3BlblBvcHVwIiwiY2xvc2VQb3B1cCIsIiQiLCJlbCIsImF0dHIiLCJpbm5lciIsImFkZENsYXNzIiwib3ZlcmZsb3ciLCJyZW1vdmVDbGFzcyIsImNoYXRib3QiLCJjc3MiLCJwcml2YWN5TGluayIsImZpZWxkcyIsIm5hbWUiLCJlbWFpbCIsInBob25lIiwicG9ydGZvbGlvU2l6ZSIsImV4ZWN1dGVkIiwiX2NhbGxlZSIsInJlZ2VuZXJhdG9yUnVudGltZSIsIndyYXAiLCJfY29udGV4dCIsInByZXYiLCJuZXh0Iiwid3JpdGVUZXh0IiwidGV4dCIsInN0eWxlIiwid3JpdGVyIiwic2VudCIsImNvbmNhdCIsImZpZWxkIiwic3RvcCIsIm9wdGlvbnMiLCJyZW1vdmVBdHRyIiwiYXBwZW5kIiwibG9nb1RleHQiLCJsZW5ndGgiLCJkIiwiRGF0ZSIsInRpbWUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwiY2hhdFRvUmVtb3ZlIiwiY2xvY2tUb1JlbW92ZSIsImNsb2NrVGV4dCIsImNoYXQiLCJjbG9jayIsInJlbW92ZSIsImJ1YmJsZUhUTUwiLCJyZXR1cm5WYWx1ZSIsImRlbGF5IiwiZ28iLCJvbiIsInVucGF1c2UiLCJwYXVzZVVudGlsIiwiZ3JlY2FwdGNoYSIsInNpdGVrZXkiLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJoZWlnaHQiLCJyb3dzVG9TaGlmdCIsInRoaXMiLCJ0b3AiLCJsb2dvU2hpZnREb3duIiwiY29tcGxldGUiLCJlbGVtZW50Iiwic2V0VGltZW91dCIsImxhc3QiLCJjYXB0Y2hhQ29udGFpbmVyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJtcyIsIl9jYWxsZWUzIiwiX2NvbnRleHQzIiwiYWJydXB0Il0sIm1hcHBpbmdzIjoiMFlBRUEsSUFBSUEs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VyxFQUFBQSxnQkFBWTFDLEtBQUEsS0FBQSxpQkFqSlJ1QixFQUFBQSxLQUFBQSxHQW9KQTJDLEVBcEpBM0MsS0FBQUEsR0FBQUEsT0FBQUEsRUFBQUEsT0FBQUEsU0FBQUEsRUFBQUEsTUFBQUEsS0FBQUEsR0FBQUEsSUFBQUEsTUFBQUEsT0FBQUEsRUFBQUEsU0FBQUEsTyxzQkF1SlFnQyxTQUFBQSxNQUFBQSxHQUNILE9BQUEsSUFBQVksUUFBQSxTQUFBQyxFQUFBQyxHQUpxREwsV0FBMUQsV0FNSEksRUFwSGIsT0F1S1dFLEtBL0NDeEIsU0FBQUEsVUF4SFp0RCxPQUFBLEUsU0FBQTJELFcsZ0lBQUEsU0FBQW9CLEVBQUFSLEdBQUEsT0FBQWhELG1CQUFBQyxLQUFBLFNBQUF3RCxHQUFBLE9BQUEsT0FBQUEsRUFBQXRELEtBQUFzRCxFQUFBckQsTUFBQSxLQUFBLEVBQUEsR0EySEkzQixNQTNISixPQUFBZ0YsRUFBQXJELEtBQUEsRUE0SFE0QixNQUFNLEtBNUhkeUIsRUFBQXJELEtBQUEsRUFBQSxNQUFBLEtBQUEsRUFBQXFELEVBQUFyRCxLQUFBLEVBQUEsTUFBQSxLQUFBLEVBQUEsT0FBQXFELEVBQUFDLE9BQUEsU0FnSWdCZixFQUFBQSxHQUFBQSxPQWhJaEIsS0FBQSxFQUFBLElBQUEsTUFBQSxPQUFBYyxFQUFBN0MsU0FBQTRDLE8sc0JBa0lnQmIsU0FBQUEsZ0JBQUFBIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBwYXVzZTtcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjbGlja01lXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUG9wdXApO1xyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NsaWNrTWUxXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUG9wdXApO1xyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Nsb3NlUG9wdXBcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlUG9wdXApO1xyXG5sZXQgZWwgPSAkKFwiI3BvcHVwXCIpO1xyXG5sZXQgaW5uZXIgPSAkKFwiLnBvcHVwLWlubmVyXCIpO1xyXG5cclxuZnVuY3Rpb24gb3BlblBvcHVwKCkge1xyXG4gICAgaW5uZXIuYXR0cihcInN0eWxlXCIsIFwibWFyZ2luLXJpZ2h0OjIwcHhcIik7XHJcbiAgICBlbC5yZW1vdmVDbGFzcyhcImZhZGUtb3V0XCIpLmFkZENsYXNzKFwiZmFkZS1pblwiKTtcclxuICAgIGVsLmF0dHIoXCJzdHlsZVwiLCBcInZpc2liaWxpdHk6dmlzaWJsZVwiKTtcclxuICAgICQoXCJib2R5XCIpLmNzcyh7IG92ZXJmbG93OiBcImhpZGRlblwiIH0pO1xyXG4gICAgY2hhdGJvdCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZVBvcHVwKCkge1xyXG4gICAgaW5uZXIuYXR0cihcInN0eWxlXCIsIFwibWFyZ2luLXJpZ2h0OjBweFwiKTtcclxuICAgIGVsLnJlbW92ZUNsYXNzKFwiZmFkZS1pblwiKS5hZGRDbGFzcyhcImZhZGUtb3V0XCIpO1xyXG4gICAgZWwuYXR0cihcInN0eWxlXCIsIFwidmlzaWJpbGl0eTpoaWRkZW5cIik7XHJcbiAgICAvLyBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPj0gNzY4KSB7XHJcbiAgICAkKFwiYm9keVwiKS5jc3MoeyBvdmVyZmxvdzogXCJhdXRvXCIgfSk7XHJcbiAgICAvLyB9XHJcbn1cclxuXHJcbi8qR2V0IGV4aXN0aW5nIHJvdyBoZWlnaHQsIGFkZCAxcmVtIGZvciBldmVyeSB0aW1lIGNoYXQtYnViYmxlIHRleHQgd2lsbCB3cmFwLCBhbmltYXRlIGJvdC1sb2dvJ3Mgc2hpZnQgZG93biB3aXRoIHRvcDpcclxuICBtb3ZlIGJvdC1sb2dvIHRvIG5ldyByb3cgYWZ0ZXIgYW5pbWF0aW9uIHRpbWVvdXQqL1xyXG5sZXQgcHJpdmFjeUxpbmsgPVxyXG4gICAgXCJodHRwOi8vaW50ZWdyaXR5ZmluYW5jaWFsc2VydmljZWxsYy5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMTUvMDUvSUZTLVByaXZhY3ktUGxlZGdlLWFuZC1Ob3RpZmljYXRpb24ucGRmXCI7XHJcbmxldCBmaWVsZHMgPSB7XHJcbiAgICBuYW1lOiBcIlwiLFxyXG4gICAgZW1haWw6IFwiXCIsXHJcbiAgICBwaG9uZTogXCJcIixcclxuICAgIHBvcnRmb2xpb1NpemU6IFwiXCIsXHJcbn07XHJcblxyXG5sZXQgY2hhdGJvdCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgZXhlY3V0ZWQgPSBmYWxzZTtcclxuICAgIHJldHVybiBhc3luYyBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCFleGVjdXRlZCkge1xyXG4gICAgICAgICAgICBleGVjdXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIk91ciBib29rIGhhcyBiZWVuIHJlcXVlc3RlZCBvdmVyIE5hTiB0aW1lcyFcIixcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICAgIHdyaXRlcjogXCJib3RcIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OlxyXG4gICAgICAgICAgICAgICAgICAgIFwiQWxsIHdlIG5lZWQgc29tZSBpbmZvcm1hdGlvbiB0byBkZXRlcm1pbmUgd2hldGhlciB0aGlzIGJvb2sgc3VpdHMgeW91ciBuZWVkcy5cIixcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICAgIHdyaXRlcjogXCJib3RcIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGZpZWxkcy5uYW1lID0gYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiRmlyc3Qgb2YgYWxsLCB3aGF0IGlzIHlvdXIgbmFtZT9cIixcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcImZvcm1cIixcclxuICAgICAgICAgICAgICAgIGZpZWxkOiBcIm5hbWVcIixcclxuICAgICAgICAgICAgICAgIHdyaXRlcjogXCJib3RcIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBmaWVsZHMubmFtZSxcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICAgIHdyaXRlcjogXCJ1c2VyXCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgdGV4dDogYEdyZWF0ISBOaWNlIHRvIG1lZXQgeW91ICR7ZmllbGRzLm5hbWV9IWAsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgdGV4dDpcclxuICAgICAgICAgICAgICAgICAgICBcIkJlZm9yZSB3ZSBnbyBhbnkgZnVydGhlciwgd2Ugd2FudCB5b3UgdG8ga25vdyB3ZSB0YWtlIHlvdXIgZGF0YSBWRVJZIHNlcmlvdXNseS5cIixcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICAgIHdyaXRlcjogXCJib3RcIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgPGEgaHJlZj0ke3ByaXZhY3lMaW5rfSB0YXJnZXQ9XCJfYmxhbmtcIj5IZXJlPC9hPiBpcyBvdXIgcHJpdmFjeSBwb2xpY3kuYCxcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICAgIHdyaXRlcjogXCJib3RcIixcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBmaWVsZHMucGhvbmUgPSBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgdGV4dDpcclxuICAgICAgICAgICAgICAgICAgICBcIldoYXQncyBhIGdvb2QgcGhvbmUgbnVtYmVyIHRvIHJlYWNoIHlvdSBhdD8gKFdlIHdvbid0IHNwYW0geW91OyBvbmx5IGEgb25lIHRpbWUgY29uZmlybWF0aW9uKVwiLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IFwiZm9ybVwiLFxyXG4gICAgICAgICAgICAgICAgZmllbGQ6IFwicGhvbmVcIixcclxuICAgICAgICAgICAgICAgIHdyaXRlcjogXCJib3RcIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBmaWVsZHMucGhvbmUsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwidXNlclwiLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZmllbGRzLmVtYWlsID0gYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgIHRleHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgXCJHcmVhdCEgQW5kIHdoYXQgaXMgYSBnb29kIGVtYWlsIHdlIGNhbiBzZW5kIHlvdXIgYm9vayB0bz8gKEFnYWluLCB3ZSB3b24ndCBzcGFtIHlvdSlcIixcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcImZvcm1cIixcclxuICAgICAgICAgICAgICAgIGZpZWxkOiBcImVtYWlsXCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgdGV4dDogYCR7ZmllbGRzLmVtYWlsfWAsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwidXNlclwiLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBQZXJmZWN0ICR7ZmllbGRzLm5hbWV9LiBXaGF0IHdvdWxkIGJlc3QgZGVzY3JpYmUgdGhlIGFtb3VudCBvZiBpbnZlc3RhYmxlIGFzc2V0cyB5b3UgaGF2ZSBzYXZlZCBmb3IgcmV0aXJlbWVudD8gKFdlIGN1c3RvbWl6ZSB0aGUgaW5mb3JtYXRpb24gd2Ugc2VuZCBiYXNlZCBvbiB5b3VyIHNpdHVhdGlvbilgLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IFwic2VsZWN0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgdGV4dDogYCR7ZmllbGRzLnBvcnRmb2xpb1NpemV9YCxcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICAgIHdyaXRlcjogXCJ1c2VyXCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgdGV4dDogYEdyZWF0ICR7ZmllbGRzLm5hbWV9LCBvbmUgbGFzdCB0aGluZy4gIFdlIG5lZWQgdG8gbWFrZSBzdXJlIHlvdSdyZSBhIHJlYWwgcGVyc29uISAgU29sdmUgdGhlIGNhcHRjaGEgYmVsb3cgYW5kIHdlJ2xsIGdldCB0aGF0IGJvb2sgc2VudCBvdmVyIHRvIHlvdSFgLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IGZpZWxkcy5lbWFpbCxcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcImNhcHRjaGFcIixcclxuICAgICAgICAgICAgICAgIHdyaXRlcjogXCJib3RcIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSkoKTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHdyaXRlVGV4dChvcHRpb25zKSB7XHJcbiAgICBjb25zdCBidWJibGVIVE1MID1cclxuICAgICAgICAnPGRpdiBjbGFzcz1cInJvdyBhbGlnbi1pdGVtcy1jZW50ZXIgY2hhdC1yb3cgcm93LWN1cnJlbnRcIj4gXFxcclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbC1tZC0xIGNvbC14bC0yIHBhZGRpbmctY29sdW1uXCI+IFxcXHJcblx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGlkPVwibGVmdC10YWctY3VycmVudFwiIGNsYXNzPVwiY29sLTIgY29sLXNtLTEgbG9nby1jb2x1bW5cIj4gXFxcclxuXHRcdFx0XHRcdFx0PC9kaXY+IFxcXHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb2wtOCBjb2wtc20tMTAgY29sLW1kLTggY29sLXhsLTYgY29udGVudC1jb2x1bW5cIj4gXFxcclxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGlkPVwiYm90LWNoYXQtY3VycmVudFwiIGNsYXNzPVwiY2hhdC1idWJibGUgYm90IGNoYXQtZmFkZS1pblwiPiBcXFxyXG5cdFx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHRcdDxkaXYgaWQ9XCJ1c2VyLWNoYXQtY3VycmVudFwiIGNsYXNzPVwiY2hhdC1idWJibGUgdXNlciBmbG9hdC1yaWdodCBjaGF0LWZhZGUtaW5cIj4gXFxcclxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj4gXFxcclxuXHRcdFx0XHRcdFx0PC9kaXY+IFxcXHJcblx0XHRcdFx0XHRcdDxkaXYgaWQ9XCJyaWdodC10YWctY3VycmVudFwiIGNsYXNzPVwiY29sLTIgY29sLXNtLTEgbG9nby1jb2x1bW5cIj4gXFxcclxuXHRcdFx0XHRcdFx0PC9kaXY+IFxcXHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb2wtbWQtMSBjb2wteGwtMiBwYWRkaW5nLWNvbHVtblwiPiBcXFxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj4gXFxcclxuXHRcdFx0XHRcdDwvZGl2Pic7XHJcblxyXG4gICAgJChcIi5yb3ctY3VycmVudFwiKS5yZW1vdmVDbGFzcyhcInJvdy1jdXJyZW50XCIpO1xyXG4gICAgJChcIiNib3QtY2hhdC1jdXJyZW50XCIpLnJlbW92ZUF0dHIoXCJpZFwiKTtcclxuICAgICQoXCIjdXNlci1jaGF0LWN1cnJlbnRcIikucmVtb3ZlQXR0cihcImlkXCIpO1xyXG4gICAgJChcIiNsZWZ0LXRhZy1jdXJyZW50XCIpLnJlbW92ZUF0dHIoXCJpZFwiKTtcclxuICAgICQoXCIjcmlnaHQtdGFnLWN1cnJlbnRcIikucmVtb3ZlQXR0cihcImlkXCIpO1xyXG5cclxuICAgIGxldCBsb2dvVGV4dDtcclxuICAgICQoXCIjcG9wdXAtd2luZG93XCIpLmFwcGVuZChidWJibGVIVE1MKTtcclxuICAgIGlmIChvcHRpb25zLndyaXRlciA9PT0gXCJib3RcIikge1xyXG4gICAgICAgIGlmICgkKFwiLmNoYXQtcm93XCIpLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgbG9nb1RleHQgPVxyXG4gICAgICAgICAgICAgICAgJzxpbWcgaWQ9XCJib3QtbG9nby1jdXJyZW50XCIgc3JjPVwiaW1hZ2VzL0lGU0xvZ28ucG5nXCIgY2xhc3M9XCJib3QtbG9nbyBsb2dvLXBvcC1pblwiPic7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbG9nb1RleHQgPVxyXG4gICAgICAgICAgICAgICAgJzxpbWcgaWQ9XCJib3QtbG9nby1jdXJyZW50XCIgc3JjPVwiaW1hZ2VzL0lGU0xvZ28ucG5nXCIgY2xhc3M9XCJib3QtbG9nb1wiPic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoXCIjcmlnaHQtdGFnLWN1cnJlbnRcIikuYXBwZW5kKFxyXG4gICAgICAgICAgICAnPGRpdiBpZD1cImJvdC1jbG9jay1jdXJyZW50XCIgY2xhc3M9XCJib3QtY2xvY2tcIj48L2Rpdj4nXHJcbiAgICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJChcIiNsZWZ0LXRhZy1jdXJyZW50XCIpLmFwcGVuZChcclxuICAgICAgICAgICAgJzxkaXYgaWQ9XCJ1c2VyLWNsb2NrLWN1cnJlbnRcIiBjbGFzcz1cInVzZXItY2xvY2tcIj48L2Rpdj4nXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY2hhdCwgY2xvY2ssIGNsb2NrVG9SZW1vdmUsIGNoYXRUb1JlbW92ZSwgY2xvY2tUZXh0O1xyXG4gICAgbGV0IGQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgbGV0IHRpbWUgPSBkLmdldEhvdXJzKCkgKyBcIjpcIiArIGQuZ2V0TWludXRlcygpICsgXCI6XCIgKyBkLmdldFNlY29uZHMoKTtcclxuXHJcbiAgICBpZiAob3B0aW9ucy53cml0ZXIgPT09IFwiYm90XCIpIHtcclxuICAgICAgICBjaGF0ID0gJChcIiNib3QtY2hhdC1jdXJyZW50XCIpO1xyXG4gICAgICAgIGNsb2NrID0gJChcIiNib3QtY2xvY2stY3VycmVudFwiKTtcclxuICAgICAgICBjaGF0VG9SZW1vdmUgPSAkKFwiI3VzZXItY2hhdC1jdXJyZW50XCIpO1xyXG4gICAgICAgIGNsb2NrVG9SZW1vdmUgPSAkKFwiI3VzZXItY2xvY2stY3VycmVudFwiKTtcclxuICAgICAgICBjbG9ja1RleHQgPSAnPGRpdiBjbGFzcz1cImNsb2NrLXRleHQgYm90LWNsb2NrLXRleHRcIj4nICsgdGltZSArIFwiPC9kaXY+XCI7XHJcbiAgICAgICAgJChcIi5ib3QubGFzdFwiKS5yZW1vdmVDbGFzcyhcImxhc3RcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNoYXQgPSAkKFwiI3VzZXItY2hhdC1jdXJyZW50XCIpO1xyXG4gICAgICAgIGNsb2NrID0gJChcIiN1c2VyLWNsb2NrLWN1cnJlbnRcIik7XHJcbiAgICAgICAgY2hhdFRvUmVtb3ZlID0gJChcIiNib3QtY2hhdC1jdXJyZW50XCIpO1xyXG4gICAgICAgIGNsb2NrVG9SZW1vdmUgPSAkKFwiI2JvdC1jbG9jay1jdXJyZW50XCIpO1xyXG4gICAgICAgICQoXCIucm93LWN1cnJlbnRcIikuYWRkQ2xhc3MoXCJoZWlnaHQtc2hpZnRcIik7XHJcbiAgICAgICAgY2xvY2tUZXh0ID1cclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjbG9jay10ZXh0IHVzZXItY2xvY2stdGV4dFwiIHN0eWxlPVwiaGVpZ2h0OjEwMCU7bWF4LWhlaWdodDoxMDAlXCI+JyArXHJcbiAgICAgICAgICAgIHRpbWUgK1xyXG4gICAgICAgICAgICBcIjwvZGl2PlwiO1xyXG4gICAgICAgICQoXCIudXNlci5sYXN0XCIpLnJlbW92ZUNsYXNzKFwibGFzdFwiKTtcclxuICAgIH1cclxuICAgIGNoYXQuYWRkQ2xhc3MoXCJsYXN0XCIpO1xyXG4gICAgY2xvY2tUb1JlbW92ZS5yZW1vdmUoKTtcclxuICAgIGNoYXRUb1JlbW92ZS5yZW1vdmUoKTtcclxuICAgIGNsb2NrLmFwcGVuZChjbG9ja1RleHQpO1xyXG4gICAgY2xvY2sucmVtb3ZlQXR0cihcImlkXCIpO1xyXG4gICAgbGV0IHJldHVyblZhbHVlO1xyXG5cclxuICAgIHN3aXRjaCAob3B0aW9ucy5zdHlsZSkge1xyXG4gICAgICAgIGNhc2UgXCJ0ZXh0XCI6XHJcbiAgICAgICAgICAgIGNoYXQuYXBwZW5kKCc8cCBjbGFzcz1cImNoYXQtdGV4dFwiPicgKyBvcHRpb25zLnRleHQgKyBcIjwvcD5cIik7XHJcbiAgICAgICAgICAgIHJldHVyblZhbHVlID0gZGVsYXkoMTAwMCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJmb3JtXCI6XHJcbiAgICAgICAgICAgIGNoYXQuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgJzxwIGNsYXNzPVwiY2hhdC10ZXh0XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy50ZXh0ICtcclxuICAgICAgICAgICAgICAgICAgICBgPC9wPjxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cCBtYi0zXCI+IFxcXHJcblx0XHRcdDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwiJHtvcHRpb25zLmZpZWxkfS1pbnB1dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcGxhY2Vob2xkZXI9XCJZb3VyICR7b3B0aW9ucy5maWVsZH1cIiBhcmlhLWxhYmVsPVwiWW91ciAke29wdGlvbnMuZmllbGR9XCIgYXJpYS1kZXNjcmliZWRieT1cIiR7b3B0aW9ucy5maWVsZH0tc3VibWl0XCI+IFxcIFxyXG4gIFx0XHRcdDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cC1hcHBlbmRcIj4gXFxcclxuXHRcdFx0PHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC10ZXh0XCIgaWQ9XCIke29wdGlvbnMuZmllbGR9LXN1Ym1pdFwiPiBvazwvc3Bhbj48L2Rpdj48L2Rpdj5gXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBsZXQgZ28gPSAkKGAjJHtvcHRpb25zLmZpZWxkfS1zdWJtaXRgKTtcclxuICAgICAgICAgICAgcGF1c2UgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgZ28ub24oXCJjbGlja1wiLCB1bnBhdXNlKTtcclxuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBwYXVzZVVudGlsKGAjJHtvcHRpb25zLmZpZWxkfS1pbnB1dGApO1xyXG5cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInNlbGVjdGlvblwiOlxyXG4gICAgICAgICAgICBjaGF0LmFwcGVuZCgnPHAgY2xhc3M9XCJjaGF0LXRleHRcIj4nICsgb3B0aW9ucy50ZXh0ICsgXCI8L3A+XCIpO1xyXG4gICAgICAgICAgICBsZXQgb3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAnTGVzcyB0aGFuICQxMDAsMDAwIG9mIGludmVzdGFibGUgYXNzZXRzIHNhdmVkIGZvciByZXRpcmVtZW50JyxcclxuICAgICAgICAgICAgICAnQmV0d2VlbiAkMTAwLDAwMCBhbmQgJDI1MCwwMDAgb2YgaW52ZXN0YWJsZSBhc3NldHMgc2F2ZWQgZm9yIHJldGlyZW1lbnQnLFxyXG4gICAgICAgICAgICAgICdCZXR3ZWVuICQyNTAsMDAwIGFuZCAkNTAwLDAwMCBvZiBpbnZlc3RhYmxlIGFzc2V0cyBzYXZlZCBmb3IgcmV0aXJlbWVudCcsXHJcbiAgICAgICAgICAgICAgJ0JldHdlZW4gJDUwMCwwMDAgYW5kICQxLDAwMCwwMDAgb2YgaW52ZXN0YWJsZSBhc3NldHMgc2F2ZWQgZm9yIHJldGlyZW1lbnQnLFxyXG4gICAgICAgICAgICAgICdPdmVyICQxLDAwMCwwMDAgb2YgaW52ZXN0YWJsZSBhc3NldHMgc2F2ZWQgZm9yIHJldGlyZW1lbnQnXHJcbiAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiY2FwdGNoYVwiOlxyXG4gICAgICAgICAgICBjaGF0LmFwcGVuZCgnPHAgY2xhc3M9XCJjaGF0LXRleHRcIj4nICsgb3B0aW9ucy50ZXh0ICsgXCI8L3A+XCIpO1xyXG4gICAgICAgICAgICBsZXQgY2FwdGNoYUNvbnRhaW5lcjtcclxuICAgICAgICAgICAgbGV0IGxvYWRDYXB0Y2hhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY2FwdGNoYUNvbnRhaW5lciA9IGdyZWNhcHRjaGEucmVuZGVyKFwiY2FwdGNoYV9jb250YWluZXJcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpdGVrZXk6IFwiWW91ciBzaXRla2V5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBsb2FkQ2FwdGNoYSgpO1xyXG5cclxuICAgICAgICAgICAgcGF1c2UgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHBhdXNlVW50aWwoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy53cml0ZXIgPT09IFwiYm90XCIpIHtcclxuICAgICAgICBpZiAoJChcIi5jb250ZW50LWNvbHVtblwiKS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIGxldCBsb2dvU2hpZnREb3duID1cclxuICAgICAgICAgICAgICAgICQoXCIucm93LWN1cnJlbnRcIikuaGVpZ2h0KCkgLyAyICtcclxuICAgICAgICAgICAgICAgICQoXCIjbGFzdC1ib3Qtcm93XCIpLmhlaWdodCgpIC8gMjtcclxuICAgICAgICAgICAgbGV0IHJvd3NUb1NoaWZ0ID0gJChcIi5oZWlnaHQtc2hpZnRcIik7XHJcbiAgICAgICAgICAgIGlmIChyb3dzVG9TaGlmdC5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJvd3NUb1NoaWZ0LmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ29TaGlmdERvd24gKz0gJCh0aGlzKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoXCIjYm90LWxvZ28tY3VycmVudFwiKS52ZWxvY2l0eShcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IGxvZ29TaGlmdERvd24sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA0MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBcImVhc2VJblF1YWRcIixcclxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNzcyhcInZpc2liaWxpdHlcIiwgXCJoaWRkZW5cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihcImlkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93c1RvU2hpZnQucmVtb3ZlQ2xhc3MoXCJoZWlnaHQtc2hpZnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgJChcIiNsYXN0LWJvdC1yb3dcIikucmVtb3ZlQXR0cihcImlkXCIpO1xyXG5cclxuICAgICAgICAgICAgJChcIiNib3QtbG9nby1jdXJyZW50XCIpLnJlbW92ZUF0dHIoXCJpZFwiKTtcclxuICAgICAgICAgICAgJChcImJvdC1sb2dvXCIpLmxhc3QoKS5hdHRyKFwiaWRcIiwgXCJib3QtbG9nby1jdXJyZW50XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKFwiI2xlZnQtdGFnLWN1cnJlbnRcIikuYXBwZW5kKGxvZ29UZXh0KTtcclxuICAgICAgICAkKFwiLnJvdy1jdXJyZW50XCIpLmF0dHIoXCJpZFwiLCBcImxhc3QtYm90LXJvd1wiKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXdhaXQgcmV0dXJuVmFsdWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGF5KG1zKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgIH0sIG1zKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHVucGF1c2UoKSB7XHJcbiAgICBwYXVzZSA9IGZhbHNlO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHBhdXNlVW50aWwoZWxlbWVudCkge1xyXG4gICAgd2hpbGUgKHBhdXNlKSB7XHJcbiAgICAgICAgYXdhaXQgZGVsYXkoMTAwKTtcclxuICAgIH1cclxuICAgIHJldHVybiAkKGVsZW1lbnQpLnZhbCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmNyeXB0Rm9ybURhdGEoZGF0YSkge1xyXG4gICAgbGV0IHB1YmxpY0tleTtcclxufVxyXG4iXX0=
