"use strict";function asyncGeneratorStep(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(s){return function(){var t=this,i=arguments;return new Promise(function(e,r){var n=s.apply(t,i);function o(t){asyncGeneratorStep(n,e,r,o,a,"next",t)}function a(t){asyncGeneratorStep(n,e,r,o,a,"throw",t)}o(void 0)})}}var pause;document.querySelector("#clickMe").addEventListener("click",openPopup),document.querySelector("#clickMe1").addEventListener("click",openPopup),document.querySelector("#closePopup").addEventListener("click",closePopup);var el=$("#popup"),inner=$(".popup-inner");function openPopup(){inner.attr("style","margin-right:20px"),el.removeClass("fade-out").addClass("fade-in"),el.attr("style","visibility:visible"),$("body").css({overflow:"hidden"}),chatbot()}function closePopup(){inner.attr("style","margin-right:0px"),el.removeClass("fade-in").addClass("fade-out"),el.attr("style","visibility:hidden"),$("body").css({overflow:"auto"})}var privacyLink="http://integrityfinancialservicellc.com/wp-content/uploads/2015/05/IFS-Privacy-Pledge-and-Notification.pdf",fields={name:"",email:"",phone:"",portfolioSize:""},chatbot=function(){var e=!1;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=36;break}return e=!0,t.next=4,writeText({text:"Our book has been requested over NaN times!",style:"text",writer:"bot"});case 4:return t.next=6,writeText({text:"All we need some information to determine whether this book suits your needs.",style:"text",writer:"bot"});case 6:return t.next=8,writeText({text:"First of all, what is your name?",style:"form",field:"name",writer:"bot"});case 8:return fields.name=t.sent,t.next=11,writeText({text:fields.name,style:"text",writer:"user"});case 11:return t.next=13,writeText({text:"Great! Nice to meet you ".concat(fields.name,"!"),style:"text",writer:"bot"});case 13:return t.next=15,writeText({text:"Before we go any further, we want you to know we take your data VERY seriously.",style:"text",writer:"bot"});case 15:return t.next=17,writeText({text:"<a href=".concat(privacyLink,' target="_blank">Here</a> is our privacy policy.'),style:"text",writer:"bot"});case 17:return t.next=19,writeText({text:"What's a good phone number to reach you at? (We won't spam you; only a one time confirmation)",style:"form",field:"phone",writer:"bot"});case 19:return fields.phone=t.sent,t.next=22,writeText({text:fields.phone,style:"text",writer:"user"});case 22:return t.next=24,writeText({text:"Great! And what is a good email we can send your book to? (Again, we won't spam you)",style:"form",field:"email",writer:"bot"});case 24:return fields.email=t.sent,t.next=27,writeText({text:"".concat(fields.email),style:"text",writer:"user"});case 27:return t.next=29,writeText({text:"Perfect ".concat(fields.name,". What would best describe the amount of investable assets you have saved for retirement? (We customize the information we send based on your situation)"),style:"portfolio",writer:"bot"});case 29:return fields.portfolioSize=t.sent,t.next=32,writeText({text:"".concat(fields.portfolioSize),style:"text",writer:"user"});case 32:return t.next=34,writeText({text:"Great ".concat(fields.name,", one last thing.  We need to make sure you're a real person!  Solve the captcha below and we'll get that book sent over to you!"),style:"text",writer:"bot"});case 34:return t.next=36,writeText({text:fields.email,style:"captcha",writer:"bot"});case 36:case"end":return t.stop()}},t)}))}();function writeText(t){return _writeText.apply(this,arguments)}function _writeText(){return(_writeText=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var r,n,o,a,i,s,c,l,u,d,p,f,m,b,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:$(".row-current").removeClass("row-current"),$("#bot-chat-current").removeAttr("id"),$("#user-chat-current").removeAttr("id"),$("#left-tag-current").removeAttr("id"),$("#right-tag-current").removeAttr("id"),$("#popup-window").append('<div class="row align-items-center chat-row row-current"> \t\t\t\t\t\t<div class="col-md-1 col-xl-2 padding-column"> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div id="left-tag-current" class="col-2 col-sm-1 logo-column"> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="col-8 col-sm-10 col-md-8 col-xl-6 content-column"> \t\t\t\t\t\t\t<div id="bot-chat-current" class="chat-bubble bot chat-fade-in"> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t<div id="user-chat-current" class="chat-bubble user float-right chat-fade-in"> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div id="right-tag-current" class="col-2 col-sm-1 logo-column"> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="col-md-1 col-xl-2 padding-column"> \t\t\t\t\t\t</div> \t\t\t\t\t</div>'),"bot"===e.writer?(r=1<$(".chat-row").length?'<img id="bot-logo-current" src="images/IFSLogo.png" class="bot-logo logo-pop-in">':'<img id="bot-logo-current" src="images/IFSLogo.png" class="bot-logo">',$("#right-tag-current").append('<div id="bot-clock-current" class="bot-clock"></div>')):$("#left-tag-current").append('<div id="user-clock-current" class="user-clock"></div>'),c=new Date,c=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds(),"bot"===e.writer?(n=$("#bot-chat-current"),o=$("#bot-clock-current"),i=$("#user-chat-current"),a=$("#user-clock-current"),s='<div class="clock-text bot-clock-text">'+c+"</div>",$(".bot.last").removeClass("last")):(n=$("#user-chat-current"),o=$("#user-clock-current"),i=$("#bot-chat-current"),a=$("#bot-clock-current"),$(".row-current").addClass("height-shift"),s='<div class="clock-text user-clock-text" style="height:100%;max-height:100%">'+c+"</div>",$(".user.last").removeClass("last")),n.addClass("last"),a.remove(),i.remove(),o.append(s),o.removeAttr("id"),t.t0=e.style,t.next="text"===t.t0?19:"form"===t.t0?22:"portfolio"===t.t0?28:"captcha"===t.t0?38:42;break;case 19:return n.append('<p class="chat-text">'.concat(e.text,"</p>")),l=delay(1e3),t.abrupt("break",42);case 22:return n.append('<p class="chat-text">'+e.text+'</p><div class="input-group mb-3"> \t\t\t<input type="text" id="'.concat(e.field,'-input" class="form-control" placeholder="Your ').concat(e.field,'" aria-label="Your ').concat(e.field,'" aria-describedby="').concat(e.field,'-submit">  \n  \t\t\t<div class="input-group-append"> \t\t\t<span class="input-group-text" id="').concat(e.field,'-submit"> ok</span></div></div>')),u=$("#".concat(e.field,"-submit")),pause=!0,u.on("click",unpause),l=pauseUntil("#".concat(e.field,"-input"),function(t){return t.val()}),t.abrupt("break",42);case 28:for(n.append('<p class="chat-text">'+e.text+"</p>"),u=["Less than $100,000 of investable assets saved for retirement","Between $100,000 and $250,000 of investable assets saved for retirement","Between $250,000 and $500,000 of investable assets saved for retirement","Between $500,000 and $1,000,000 of investable assets saved for retirement","Over $1,000,000 of investable assets saved for retirement"],n.append('<div class="portfolio-selection">'),d=$(".portfolio-selection"),p=0,f=u;p<f.length;p++)m=f[p],d.append('<button type="button" class="btn btn-light portfolio-button">'.concat(m,"</button>"));return d.on("click","button",function(){$(this).attr("id","portfolio-size"),unpause()}),n.append("</div>"),pause=!0,l=pauseUntil("#portfolio-size",function(t){return t.text()}),t.abrupt("break",42);case 38:return n.append('<p class="chat-text">'+e.text+"</p>"),n.append('<button id="submit-button" \n            class="g-recaptcha btn btn-light" \n        data-sitekey="reCAPTCHA_site_key" \n        data-callback="onSubmit" \n        data-action="submit">Submit</button>'),$("#submit-button").on("click",_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:grecaptcha.ready(function(){grecaptcha.execute("6Ld4LyQaAAAAAAcJgIAMJQCQ3B-ArchznBkWR7A9",{action:"submit"}).then(function(t){var e=new XMLHttpRequest;e.open("POST","https://us-south.functions.appdomain.cloud/api/v1/web/dwstanley%40integrityfinancialservicellc.com_dev/mysite/contactus",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onload=function(){return console.log(e.status)},e.send("name=".concat(fields.name,"&phone=").concat(fields.phone,"&email=").concat(fields.email,"&portfolioSize=").concat(fields.portfolioSize,"&token=").concat(t))})});case 1:case"end":return t.stop()}},t)}))),t.abrupt("break",42);case 42:return"bot"===e.writer&&(1<$(".content-column").length&&(b=$(".row-current").height()/2+$("#last-bot-row").height()/2,0!==(h=$(".height-shift")).length&&h.each(function(){b+=$(this).height()}),$("#bot-logo-current").velocity({top:b},{duration:400,easing:"easeInQuad",complete:function(t){setTimeout(function(){$(t).css("visibility","hidden").removeAttr("id"),h.removeClass("height-shift")},300)}}),$("#last-bot-row").removeAttr("id"),$("#bot-logo-current").removeAttr("id"),$("bot-logo").last().attr("id","bot-logo-current")),$("#left-tag-current").append(r),$(".row-current").attr("id","last-bot-row")),t.next=45,l;case 45:return t.abrupt("return",t.sent);case 46:case"end":return t.stop()}},t)}))).apply(this,arguments)}function delay(r){return new Promise(function(t,e){setTimeout(function(){t(null)},r)})}function unpause(){pause=!1}function pauseUntil(t,e){return _pauseUntil.apply(this,arguments)}function _pauseUntil(){return(_pauseUntil=_asyncToGenerator(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(pause)return t.next=3,delay(100);t.next=5;break;case 3:t.next=0;break;case 5:return t.abrupt("return",r($(e)));case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function encryptFormData(t){}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsicGF1c2UiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwib3BlblBvcHVwIiwiY2xvc2VQb3B1cCIsIiQiLCJlbCIsImF0dHIiLCJpbm5lciIsImFkZENsYXNzIiwib3ZlcmZsb3ciLCJyZW1vdmVDbGFzcyIsImNoYXRib3QiLCJjc3MiLCJwcml2YWN5TGluayIsImZpZWxkcyIsIm5hbWUiLCJlbWFpbCIsInBob25lIiwicG9ydGZvbGlvU2l6ZSIsImV4ZWN1dGVkIiwiX2NhbGxlZSIsInJlZ2VuZXJhdG9yUnVudGltZSIsIndyYXAiLCJfY29udGV4dCIsInByZXYiLCJuZXh0Iiwid3JpdGVUZXh0IiwidGV4dCIsInN0eWxlIiwid3JpdGVyIiwic2VudCIsImNvbmNhdCIsImZpZWxkIiwic3RvcCIsIm9wdGlvbnMiLCJyZW1vdmVBdHRyIiwiYXBwZW5kIiwibG9nb1RleHQiLCJsZW5ndGgiLCJkIiwiRGF0ZSIsInRpbWUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwiY2xvY2tUb1JlbW92ZSIsImNsb2NrVGV4dCIsImNoYXQiLCJjbG9jayIsImNoYXRUb1JlbW92ZSIsInJlbW92ZSIsImJ1YmJsZUhUTUwiLCJyZXR1cm5WYWx1ZSIsImRlbGF5IiwiZ28iLCJvbiIsInVucGF1c2UiLCJwYXVzZVVudGlsIiwidmFsdWUiLCJ2YWwiLCJzZWxlY3Rpb24iLCJzaXplcyIsIl9zaXplcyIsIl9pIiwic2l6ZSIsIl9jYWxsZWUyIiwiX2NvbnRleHQyIiwiZ3JlY2FwdGNoYSIsImV4ZWN1dGUiLCJhY3Rpb24iLCJ0aGVuIiwidG9rZW4iLCJ4bWxodHRwIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsInN0YXR1cyIsInNlbmQiLCJoZWlnaHQiLCJlYWNoIiwibG9nb1NoaWZ0RG93biIsInRoaXMiLCJ0b3AiLCJkdXJhdGlvbiIsImVsZW1lbnQiLCJzZXRUaW1lb3V0Iiwicm93c1RvU2hpZnQiLCJjb25zb2xlIiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIl9jYWxsZWU0IiwiZm4iLCJfY29udGV4dDQiLCJhYnJ1cHQiXSwibWFwcGluZ3MiOiIwWUFFQSxJQUFJQSxNQUNKQyxTQUFTQyxjQUFjLFlBQVlDLGlCQUFpQixRQUFTQyxXQUM3REgsU0FBU0MsY0FBYyxhQUFhQyxpQkFBaUIsUUFBU0MsV0FDOURILFNBQVNDLGNBQWMsZUFBZUMsaUJBQWlCLFFBQVNFLFlBSGhFLElBQUlMLEdBQUpNLEVBQUEsVUFDQUwsTUFBU0MsRUFBQUEsZ0JBRVRELFNBQVNDLFlBQ0xLLE1BQU1DLEtBQUMsUUFBWCxxQkFDSUMsR0FBQUEsWUFBVSxZQUFkQyxTQUFBLFdBS0lILEdBQUdDLEtBQUssUUFBUyxzQkFIckJGLEVBQUEsUUFBU0YsSUFBVCxDQUFBTyxTQUFxQixXQUNqQkYsVUFHQUgsU0FBRUQsYUFBY00sTUFBQUEsS0FBVSxRQUFBLG9CQUExQkosR0FBQUssWUFBQSxXQUFBRixTQUFBLFlBQ0FHLEdBQUFBLEtBQU8sUUFBQSxxQkFRUFAsRUFBRSxRQUFRUSxJQUFJLENBQUVILFNBQVUsU0FBMUJMLElBQUVTLFlBQWNKLDZHQUFoQkssT0FDQSxDQUNIQyxLQUFBLEdBRURDLE1BQUEsR0FDQUMsTUFBQSxHQU9JQyxjQUFlLElBSmZKLFFBQVMsV0FDVEMsSUFBTUksR0FERyxFQUVUSCxPQUFBQSxrQkFBQUEsbUJBQUFBLEtBRlMsU0FBQUksSUFBQSxPQUFBQyxtQkFBQUMsS0FBQSxTQUFBQyxHQUFBLE9BQUEsT0FBQUEsRUFBQUMsS0FBQUQsRUFBQUUsTUFBQSxLQUFBLEVBQUEsR0FBQU4sRUFBQSxDQUFBSSxFQUFBRSxLQUFBLEdBQUEsTUFBQSxPQUlUUCxHQUFlLEVBSk5LLEVBQUFFLEtBQUEsRUFBYkMsVUFBQSxDQWFnQkMsS0FBTSw4Q0FOUEMsTUFBQSxPQUNDQyxPQUFaLFFBUlMsS0FBQSxFQUFBLE9BQUFO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QUFBQSxxQkFBUUUsV0FBUixNQUNBRixFQUFBQSxZQUFBQSxPQUFPbEUsS0FBQ3FFLEtBQUFBLHFCQUlSSCxFQUFBQSxxQkFBQUEsT0FBUUksR0FBU3hFLEVBQUEsZ0JBQUFFLEtBQUEsS0FBTWtGLGlCQTNMbkMzRCxFQUFBQSxLQUFBQSxHQTRMWTJDLEVBNUxaM0MsS0FBQUEsR0FBQUEsT0FBQUEsRUFBQUEsT0FBQUEsU0FBQUEsRUFBQUEsTUFBQUEsS0FBQUEsR0FBQUEsSUFBQUEsTUFBQUEsT0FBQUEsRUFBQUEsU0FBQUEsTyxzQkE4T2hCLFNBQVN3QixNQUFNb0MsR0FsRTZCLE9BQUEsSUFBQUMsUUFBQSxTQUFBQyxFQUFBQyxHQUFBTixXQUFBLFdBQUFLLEVBQUEsT0FBQUYsS0FBQSxTQUFBakMsVUF0STVDMUQsT0FBQSxFLFNBQUEyRCxXLGtJQUFBLFNBQUFvQyxFQUFBUixFQUFBUyxHQUFBLE9BQUF6RSxtQkFBQUMsS0FBQSxTQUFBeUUsR0FBQSxPQUFBLE9BQUFBLEVBQUF2RSxLQUFBdUUsRUFBQXRFLE1BQUEsS0FBQSxFQUFBLEdBZ0tJM0IsTUFoS0osT0FBQWlHLEVBQUF0RSxLQUFBLEVBaUtRNEIsTUFBTSxLQWpLZDBDLEVBQUF0RSxLQUFBLEVBQUEsTUFBQSxLQUFBLEVBQUFzRSxFQUFBdEUsS0FBQSxFQUFBLE1BQUEsS0FBQSxFQUFBLE9BQUFzRSxFQUFBQyxPQUFBLFNBcUtnQlQsRUFBQUEsRUFBQUEsS0FyS2hCLEtBQUEsRUFBQSxJQUFBLE1BQUEsT0FBQVEsRUFBQTlELFNBQUE0RCxPLHNCQXVLZ0JOLFNBQUFBLGdCQUFBQSIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgcGF1c2U7XHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2xpY2tNZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblBvcHVwKTtcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjbGlja01lMVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblBvcHVwKTtcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjbG9zZVBvcHVwXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVBvcHVwKTtcclxubGV0IGVsID0gJChcIiNwb3B1cFwiKTtcclxubGV0IGlubmVyID0gJChcIi5wb3B1cC1pbm5lclwiKTtcclxuXHJcbmZ1bmN0aW9uIG9wZW5Qb3B1cCgpIHtcclxuICAgIGlubmVyLmF0dHIoXCJzdHlsZVwiLCBcIm1hcmdpbi1yaWdodDoyMHB4XCIpO1xyXG4gICAgZWwucmVtb3ZlQ2xhc3MoXCJmYWRlLW91dFwiKS5hZGRDbGFzcyhcImZhZGUtaW5cIik7XHJcbiAgICBlbC5hdHRyKFwic3R5bGVcIiwgXCJ2aXNpYmlsaXR5OnZpc2libGVcIik7XHJcbiAgICAkKFwiYm9keVwiKS5jc3MoeyBvdmVyZmxvdzogXCJoaWRkZW5cIiB9KTtcclxuICAgIGNoYXRib3QoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xvc2VQb3B1cCgpIHtcclxuICAgIGlubmVyLmF0dHIoXCJzdHlsZVwiLCBcIm1hcmdpbi1yaWdodDowcHhcIik7XHJcbiAgICBlbC5yZW1vdmVDbGFzcyhcImZhZGUtaW5cIikuYWRkQ2xhc3MoXCJmYWRlLW91dFwiKTtcclxuICAgIGVsLmF0dHIoXCJzdHlsZVwiLCBcInZpc2liaWxpdHk6aGlkZGVuXCIpO1xyXG4gICAgLy8gaWYgKCQod2luZG93KS53aWR0aCgpID49IDc2OCkge1xyXG4gICAgJChcImJvZHlcIikuY3NzKHsgb3ZlcmZsb3c6IFwiYXV0b1wiIH0pO1xyXG4gICAgLy8gfVxyXG59XHJcblxyXG4vKkdldCBleGlzdGluZyByb3cgaGVpZ2h0LCBhZGQgMXJlbSBmb3IgZXZlcnkgdGltZSBjaGF0LWJ1YmJsZSB0ZXh0IHdpbGwgd3JhcCwgYW5pbWF0ZSBib3QtbG9nbydzIHNoaWZ0IGRvd24gd2l0aCB0b3A6XHJcbiAgbW92ZSBib3QtbG9nbyB0byBuZXcgcm93IGFmdGVyIGFuaW1hdGlvbiB0aW1lb3V0Ki9cclxubGV0IHByaXZhY3lMaW5rID1cclxuICAgIFwiaHR0cDovL2ludGVncml0eWZpbmFuY2lhbHNlcnZpY2VsbGMuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE1LzA1L0lGUy1Qcml2YWN5LVBsZWRnZS1hbmQtTm90aWZpY2F0aW9uLnBkZlwiO1xyXG5sZXQgZmllbGRzID0ge1xyXG4gICAgbmFtZTogXCJcIixcclxuICAgIGVtYWlsOiBcIlwiLFxyXG4gICAgcGhvbmU6IFwiXCIsXHJcbiAgICBwb3J0Zm9saW9TaXplOiBcIlwiLFxyXG59O1xyXG5cclxubGV0IGNoYXRib3QgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IGV4ZWN1dGVkID0gZmFsc2U7XHJcbiAgICByZXR1cm4gYXN5bmMgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghZXhlY3V0ZWQpIHtcclxuICAgICAgICAgICAgZXhlY3V0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJPdXIgYm9vayBoYXMgYmVlbiByZXF1ZXN0ZWQgb3ZlciBOYU4gdGltZXMhXCIsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgdGV4dDpcclxuICAgICAgICAgICAgICAgICAgICBcIkFsbCB3ZSBuZWVkIHNvbWUgaW5mb3JtYXRpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhpcyBib29rIHN1aXRzIHlvdXIgbmVlZHMuXCIsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmaWVsZHMubmFtZSA9IGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIkZpcnN0IG9mIGFsbCwgd2hhdCBpcyB5b3VyIG5hbWU/XCIsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJmb3JtXCIsXHJcbiAgICAgICAgICAgICAgICBmaWVsZDogXCJuYW1lXCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgdGV4dDogZmllbGRzLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwidXNlclwiLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBHcmVhdCEgTmljZSB0byBtZWV0IHlvdSAke2ZpZWxkcy5uYW1lfSFgLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgIHRleHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgXCJCZWZvcmUgd2UgZ28gYW55IGZ1cnRoZXIsIHdlIHdhbnQgeW91IHRvIGtub3cgd2UgdGFrZSB5b3VyIGRhdGEgVkVSWSBzZXJpb3VzbHkuXCIsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgdGV4dDogYDxhIGhyZWY9JHtwcml2YWN5TGlua30gdGFyZ2V0PVwiX2JsYW5rXCI+SGVyZTwvYT4gaXMgb3VyIHByaXZhY3kgcG9saWN5LmAsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZmllbGRzLnBob25lID0gYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgIHRleHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgXCJXaGF0J3MgYSBnb29kIHBob25lIG51bWJlciB0byByZWFjaCB5b3UgYXQ/IChXZSB3b24ndCBzcGFtIHlvdTsgb25seSBhIG9uZSB0aW1lIGNvbmZpcm1hdGlvbilcIixcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcImZvcm1cIixcclxuICAgICAgICAgICAgICAgIGZpZWxkOiBcInBob25lXCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgdGV4dDogZmllbGRzLnBob25lLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAgICAgd3JpdGVyOiBcInVzZXJcIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGZpZWxkcy5lbWFpbCA9IGF3YWl0IHdyaXRlVGV4dCh7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OlxyXG4gICAgICAgICAgICAgICAgICAgIFwiR3JlYXQhIEFuZCB3aGF0IGlzIGEgZ29vZCBlbWFpbCB3ZSBjYW4gc2VuZCB5b3VyIGJvb2sgdG8/IChBZ2Fpbiwgd2Ugd29uJ3Qgc3BhbSB5b3UpXCIsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJmb3JtXCIsXHJcbiAgICAgICAgICAgICAgICBmaWVsZDogXCJlbWFpbFwiLFxyXG4gICAgICAgICAgICAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IGAke2ZpZWxkcy5lbWFpbH1gLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAgICAgd3JpdGVyOiBcInVzZXJcIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGZpZWxkcy5wb3J0Zm9saW9TaXplID0gYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBQZXJmZWN0ICR7ZmllbGRzLm5hbWV9LiBXaGF0IHdvdWxkIGJlc3QgZGVzY3JpYmUgdGhlIGFtb3VudCBvZiBpbnZlc3RhYmxlIGFzc2V0cyB5b3UgaGF2ZSBzYXZlZCBmb3IgcmV0aXJlbWVudD8gKFdlIGN1c3RvbWl6ZSB0aGUgaW5mb3JtYXRpb24gd2Ugc2VuZCBiYXNlZCBvbiB5b3VyIHNpdHVhdGlvbilgLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IFwicG9ydGZvbGlvXCIsXHJcbiAgICAgICAgICAgICAgICB3cml0ZXI6IFwiYm90XCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgdGV4dDogYCR7ZmllbGRzLnBvcnRmb2xpb1NpemV9YCxcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcInRleHRcIixcclxuICAgICAgICAgICAgICAgIHdyaXRlcjogXCJ1c2VyXCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZVRleHQoe1xyXG4gICAgICAgICAgICAgICAgdGV4dDogYEdyZWF0ICR7ZmllbGRzLm5hbWV9LCBvbmUgbGFzdCB0aGluZy4gIFdlIG5lZWQgdG8gbWFrZSBzdXJlIHlvdSdyZSBhIHJlYWwgcGVyc29uISAgU29sdmUgdGhlIGNhcHRjaGEgYmVsb3cgYW5kIHdlJ2xsIGdldCB0aGF0IGJvb2sgc2VudCBvdmVyIHRvIHlvdSFgLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICAgICAgd3JpdGVyOiBcImJvdFwiLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGVUZXh0KHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IGZpZWxkcy5lbWFpbCxcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcImNhcHRjaGFcIixcclxuICAgICAgICAgICAgICAgIHdyaXRlcjogXCJib3RcIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSkoKTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHdyaXRlVGV4dChvcHRpb25zKSB7XHJcbiAgICBjb25zdCBidWJibGVIVE1MID1cclxuICAgICAgICAnPGRpdiBjbGFzcz1cInJvdyBhbGlnbi1pdGVtcy1jZW50ZXIgY2hhdC1yb3cgcm93LWN1cnJlbnRcIj4gXFxcclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbC1tZC0xIGNvbC14bC0yIHBhZGRpbmctY29sdW1uXCI+IFxcXHJcblx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGlkPVwibGVmdC10YWctY3VycmVudFwiIGNsYXNzPVwiY29sLTIgY29sLXNtLTEgbG9nby1jb2x1bW5cIj4gXFxcclxuXHRcdFx0XHRcdFx0PC9kaXY+IFxcXHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb2wtOCBjb2wtc20tMTAgY29sLW1kLTggY29sLXhsLTYgY29udGVudC1jb2x1bW5cIj4gXFxcclxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGlkPVwiYm90LWNoYXQtY3VycmVudFwiIGNsYXNzPVwiY2hhdC1idWJibGUgYm90IGNoYXQtZmFkZS1pblwiPiBcXFxyXG5cdFx0XHRcdFx0XHRcdDwvZGl2PiBcXFxyXG5cdFx0XHRcdFx0XHRcdDxkaXYgaWQ9XCJ1c2VyLWNoYXQtY3VycmVudFwiIGNsYXNzPVwiY2hhdC1idWJibGUgdXNlciBmbG9hdC1yaWdodCBjaGF0LWZhZGUtaW5cIj4gXFxcclxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj4gXFxcclxuXHRcdFx0XHRcdFx0PC9kaXY+IFxcXHJcblx0XHRcdFx0XHRcdDxkaXYgaWQ9XCJyaWdodC10YWctY3VycmVudFwiIGNsYXNzPVwiY29sLTIgY29sLXNtLTEgbG9nby1jb2x1bW5cIj4gXFxcclxuXHRcdFx0XHRcdFx0PC9kaXY+IFxcXHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb2wtbWQtMSBjb2wteGwtMiBwYWRkaW5nLWNvbHVtblwiPiBcXFxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj4gXFxcclxuXHRcdFx0XHRcdDwvZGl2Pic7XHJcblxyXG4gICAgJChcIi5yb3ctY3VycmVudFwiKS5yZW1vdmVDbGFzcyhcInJvdy1jdXJyZW50XCIpO1xyXG4gICAgJChcIiNib3QtY2hhdC1jdXJyZW50XCIpLnJlbW92ZUF0dHIoXCJpZFwiKTtcclxuICAgICQoXCIjdXNlci1jaGF0LWN1cnJlbnRcIikucmVtb3ZlQXR0cihcImlkXCIpO1xyXG4gICAgJChcIiNsZWZ0LXRhZy1jdXJyZW50XCIpLnJlbW92ZUF0dHIoXCJpZFwiKTtcclxuICAgICQoXCIjcmlnaHQtdGFnLWN1cnJlbnRcIikucmVtb3ZlQXR0cihcImlkXCIpO1xyXG5cclxuICAgIGxldCBsb2dvVGV4dDtcclxuICAgICQoXCIjcG9wdXAtd2luZG93XCIpLmFwcGVuZChidWJibGVIVE1MKTtcclxuICAgIGlmIChvcHRpb25zLndyaXRlciA9PT0gXCJib3RcIikge1xyXG4gICAgICAgIGlmICgkKFwiLmNoYXQtcm93XCIpLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgbG9nb1RleHQgPVxyXG4gICAgICAgICAgICAgICAgJzxpbWcgaWQ9XCJib3QtbG9nby1jdXJyZW50XCIgc3JjPVwiaW1hZ2VzL0lGU0xvZ28ucG5nXCIgY2xhc3M9XCJib3QtbG9nbyBsb2dvLXBvcC1pblwiPic7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbG9nb1RleHQgPVxyXG4gICAgICAgICAgICAgICAgJzxpbWcgaWQ9XCJib3QtbG9nby1jdXJyZW50XCIgc3JjPVwiaW1hZ2VzL0lGU0xvZ28ucG5nXCIgY2xhc3M9XCJib3QtbG9nb1wiPic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoXCIjcmlnaHQtdGFnLWN1cnJlbnRcIikuYXBwZW5kKFxyXG4gICAgICAgICAgICAnPGRpdiBpZD1cImJvdC1jbG9jay1jdXJyZW50XCIgY2xhc3M9XCJib3QtY2xvY2tcIj48L2Rpdj4nXHJcbiAgICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJChcIiNsZWZ0LXRhZy1jdXJyZW50XCIpLmFwcGVuZChcclxuICAgICAgICAgICAgJzxkaXYgaWQ9XCJ1c2VyLWNsb2NrLWN1cnJlbnRcIiBjbGFzcz1cInVzZXItY2xvY2tcIj48L2Rpdj4nXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY2hhdCwgY2xvY2ssIGNsb2NrVG9SZW1vdmUsIGNoYXRUb1JlbW92ZSwgY2xvY2tUZXh0O1xyXG4gICAgbGV0IGQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgbGV0IHRpbWUgPSBkLmdldEhvdXJzKCkgKyBcIjpcIiArIGQuZ2V0TWludXRlcygpICsgXCI6XCIgKyBkLmdldFNlY29uZHMoKTtcclxuXHJcbiAgICBpZiAob3B0aW9ucy53cml0ZXIgPT09IFwiYm90XCIpIHtcclxuICAgICAgICBjaGF0ID0gJChcIiNib3QtY2hhdC1jdXJyZW50XCIpO1xyXG4gICAgICAgIGNsb2NrID0gJChcIiNib3QtY2xvY2stY3VycmVudFwiKTtcclxuICAgICAgICBjaGF0VG9SZW1vdmUgPSAkKFwiI3VzZXItY2hhdC1jdXJyZW50XCIpO1xyXG4gICAgICAgIGNsb2NrVG9SZW1vdmUgPSAkKFwiI3VzZXItY2xvY2stY3VycmVudFwiKTtcclxuICAgICAgICBjbG9ja1RleHQgPSAnPGRpdiBjbGFzcz1cImNsb2NrLXRleHQgYm90LWNsb2NrLXRleHRcIj4nICsgdGltZSArIFwiPC9kaXY+XCI7XHJcbiAgICAgICAgJChcIi5ib3QubGFzdFwiKS5yZW1vdmVDbGFzcyhcImxhc3RcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNoYXQgPSAkKFwiI3VzZXItY2hhdC1jdXJyZW50XCIpO1xyXG4gICAgICAgIGNsb2NrID0gJChcIiN1c2VyLWNsb2NrLWN1cnJlbnRcIik7XHJcbiAgICAgICAgY2hhdFRvUmVtb3ZlID0gJChcIiNib3QtY2hhdC1jdXJyZW50XCIpO1xyXG4gICAgICAgIGNsb2NrVG9SZW1vdmUgPSAkKFwiI2JvdC1jbG9jay1jdXJyZW50XCIpO1xyXG4gICAgICAgICQoXCIucm93LWN1cnJlbnRcIikuYWRkQ2xhc3MoXCJoZWlnaHQtc2hpZnRcIik7XHJcbiAgICAgICAgY2xvY2tUZXh0ID1cclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjbG9jay10ZXh0IHVzZXItY2xvY2stdGV4dFwiIHN0eWxlPVwiaGVpZ2h0OjEwMCU7bWF4LWhlaWdodDoxMDAlXCI+JyArXHJcbiAgICAgICAgICAgIHRpbWUgK1xyXG4gICAgICAgICAgICBcIjwvZGl2PlwiO1xyXG4gICAgICAgICQoXCIudXNlci5sYXN0XCIpLnJlbW92ZUNsYXNzKFwibGFzdFwiKTtcclxuICAgIH1cclxuICAgIGNoYXQuYWRkQ2xhc3MoXCJsYXN0XCIpO1xyXG4gICAgY2xvY2tUb1JlbW92ZS5yZW1vdmUoKTtcclxuICAgIGNoYXRUb1JlbW92ZS5yZW1vdmUoKTtcclxuICAgIGNsb2NrLmFwcGVuZChjbG9ja1RleHQpO1xyXG4gICAgY2xvY2sucmVtb3ZlQXR0cihcImlkXCIpO1xyXG4gICAgbGV0IHJldHVyblZhbHVlO1xyXG5cclxuICAgIHN3aXRjaCAob3B0aW9ucy5zdHlsZSkge1xyXG4gICAgICAgIGNhc2UgXCJ0ZXh0XCI6XHJcbiAgICAgICAgICAgIGNoYXQuYXBwZW5kKGA8cCBjbGFzcz1cImNoYXQtdGV4dFwiPiR7b3B0aW9ucy50ZXh0fTwvcD5gKTtcclxuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBkZWxheSgxMDAwKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcImZvcm1cIjpcclxuICAgICAgICAgICAgY2hhdC5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJjaGF0LXRleHRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnRleHQgK1xyXG4gICAgICAgICAgICAgICAgICAgIGA8L3A+PGRpdiBjbGFzcz1cImlucHV0LWdyb3VwIG1iLTNcIj4gXFxcclxuXHRcdFx0PGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCIke29wdGlvbnMuZmllbGR9LWlucHV0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cIllvdXIgJHtvcHRpb25zLmZpZWxkfVwiIGFyaWEtbGFiZWw9XCJZb3VyICR7b3B0aW9ucy5maWVsZH1cIiBhcmlhLWRlc2NyaWJlZGJ5PVwiJHtvcHRpb25zLmZpZWxkfS1zdWJtaXRcIj4gXFwgXHJcbiAgXHRcdFx0PGRpdiBjbGFzcz1cImlucHV0LWdyb3VwLWFwcGVuZFwiPiBcXFxyXG5cdFx0XHQ8c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLXRleHRcIiBpZD1cIiR7b3B0aW9ucy5maWVsZH0tc3VibWl0XCI+IG9rPC9zcGFuPjwvZGl2PjwvZGl2PmBcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBnbyA9ICQoYCMke29wdGlvbnMuZmllbGR9LXN1Ym1pdGApO1xyXG4gICAgICAgICAgICBwYXVzZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBnby5vbihcImNsaWNrXCIsIHVucGF1c2UpO1xyXG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHBhdXNlVW50aWwoYCMke29wdGlvbnMuZmllbGR9LWlucHV0YCwgKHZhbHVlKSA9PlxyXG4gICAgICAgICAgICAgICAgdmFsdWUudmFsKClcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJwb3J0Zm9saW9cIjpcclxuICAgICAgICAgICAgY2hhdC5hcHBlbmQoJzxwIGNsYXNzPVwiY2hhdC10ZXh0XCI+JyArIG9wdGlvbnMudGV4dCArIFwiPC9wPlwiKTtcclxuICAgICAgICAgICAgbGV0IHNpemVzID0gW1xyXG4gICAgICAgICAgICAgICAgXCJMZXNzIHRoYW4gJDEwMCwwMDAgb2YgaW52ZXN0YWJsZSBhc3NldHMgc2F2ZWQgZm9yIHJldGlyZW1lbnRcIixcclxuICAgICAgICAgICAgICAgIFwiQmV0d2VlbiAkMTAwLDAwMCBhbmQgJDI1MCwwMDAgb2YgaW52ZXN0YWJsZSBhc3NldHMgc2F2ZWQgZm9yIHJldGlyZW1lbnRcIixcclxuICAgICAgICAgICAgICAgIFwiQmV0d2VlbiAkMjUwLDAwMCBhbmQgJDUwMCwwMDAgb2YgaW52ZXN0YWJsZSBhc3NldHMgc2F2ZWQgZm9yIHJldGlyZW1lbnRcIixcclxuICAgICAgICAgICAgICAgIFwiQmV0d2VlbiAkNTAwLDAwMCBhbmQgJDEsMDAwLDAwMCBvZiBpbnZlc3RhYmxlIGFzc2V0cyBzYXZlZCBmb3IgcmV0aXJlbWVudFwiLFxyXG4gICAgICAgICAgICAgICAgXCJPdmVyICQxLDAwMCwwMDAgb2YgaW52ZXN0YWJsZSBhc3NldHMgc2F2ZWQgZm9yIHJldGlyZW1lbnRcIixcclxuICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgIGNoYXQuYXBwZW5kKCc8ZGl2IGNsYXNzPVwicG9ydGZvbGlvLXNlbGVjdGlvblwiPicpO1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0aW9uID0gJChcIi5wb3J0Zm9saW8tc2VsZWN0aW9uXCIpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNpemUgb2Ygc2l6ZXMpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgYDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1saWdodCBwb3J0Zm9saW8tYnV0dG9uXCI+JHtzaXplfTwvYnV0dG9uPmBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZWN0aW9uLm9uKFwiY2xpY2tcIiwgXCJidXR0b25cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKFwiaWRcIiwgXCJwb3J0Zm9saW8tc2l6ZVwiKTtcclxuICAgICAgICAgICAgICAgIHVucGF1c2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNoYXQuYXBwZW5kKFwiPC9kaXY+XCIpO1xyXG5cclxuICAgICAgICAgICAgcGF1c2UgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHBhdXNlVW50aWwoXCIjcG9ydGZvbGlvLXNpemVcIiwgKHZhbHVlKSA9PlxyXG4gICAgICAgICAgICAgICAgdmFsdWUudGV4dCgpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJjYXB0Y2hhXCI6XHJcbiAgICAgICAgICAgIGNoYXQuYXBwZW5kKCc8cCBjbGFzcz1cImNoYXQtdGV4dFwiPicgKyBvcHRpb25zLnRleHQgKyBcIjwvcD5cIik7XHJcbiAgICAgICAgICAgIGNoYXQuYXBwZW5kKGA8YnV0dG9uIGlkPVwic3VibWl0LWJ1dHRvblwiIFxyXG4gICAgICAgICAgICBjbGFzcz1cImctcmVjYXB0Y2hhIGJ0biBidG4tbGlnaHRcIiBcclxuICAgICAgICBkYXRhLXNpdGVrZXk9XCJyZUNBUFRDSEFfc2l0ZV9rZXlcIiBcclxuICAgICAgICBkYXRhLWNhbGxiYWNrPVwib25TdWJtaXRcIiBcclxuICAgICAgICBkYXRhLWFjdGlvbj1cInN1Ym1pdFwiPlN1Ym1pdDwvYnV0dG9uPmApO1xyXG5cclxuICAgICAgICAgICAgJChcIiNzdWJtaXQtYnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgYXN5bmMgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZ3JlY2FwdGNoYS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JlY2FwdGNoYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXhlY3V0ZShcIjZMZDRMeVFhQUFBQUFBY0pnSUFNSlFDUTNCLUFyY2h6bkJrV1I3QTlcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcInN1Ym1pdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJodHRwczovL3VzLXNvdXRoLmZ1bmN0aW9ucy5hcHBkb21haW4uY2xvdWQvYXBpL3YxL3dlYi9kd3N0YW5sZXklNDBpbnRlZ3JpdHlmaW5hbmNpYWxzZXJ2aWNlbGxjLmNvbV9kZXYvbXlzaXRlL2NvbnRhY3R1c1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeG1saHR0cC5vcGVuKFwiUE9TVFwiLCB1cmwsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeG1saHR0cC5zZXRSZXF1ZXN0SGVhZGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC10eXBlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhtbGh0dHAub25sb2FkID0gKCkgPT4gY29uc29sZS5sb2coeG1saHR0cC5zdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeG1saHR0cC5zZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBuYW1lPSR7ZmllbGRzLm5hbWV9JnBob25lPSR7ZmllbGRzLnBob25lfSZlbWFpbD0ke2ZpZWxkcy5lbWFpbH0mcG9ydGZvbGlvU2l6ZT0ke2ZpZWxkcy5wb3J0Zm9saW9TaXplfSZ0b2tlbj0ke3Rva2VufWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLndyaXRlciA9PT0gXCJib3RcIikge1xyXG4gICAgICAgIGlmICgkKFwiLmNvbnRlbnQtY29sdW1uXCIpLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgbGV0IGxvZ29TaGlmdERvd24gPVxyXG4gICAgICAgICAgICAgICAgJChcIi5yb3ctY3VycmVudFwiKS5oZWlnaHQoKSAvIDIgK1xyXG4gICAgICAgICAgICAgICAgJChcIiNsYXN0LWJvdC1yb3dcIikuaGVpZ2h0KCkgLyAyO1xyXG4gICAgICAgICAgICBsZXQgcm93c1RvU2hpZnQgPSAkKFwiLmhlaWdodC1zaGlmdFwiKTtcclxuICAgICAgICAgICAgaWYgKHJvd3NUb1NoaWZ0Lmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcm93c1RvU2hpZnQuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nb1NoaWZ0RG93biArPSAkKHRoaXMpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJChcIiNib3QtbG9nby1jdXJyZW50XCIpLnZlbG9jaXR5KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogbG9nb1NoaWZ0RG93bixcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDQwMCxcclxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IFwiZWFzZUluUXVhZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoZWxlbWVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKFwiaWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzVG9TaGlmdC5yZW1vdmVDbGFzcyhcImhlaWdodC1zaGlmdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAkKFwiI2xhc3QtYm90LXJvd1wiKS5yZW1vdmVBdHRyKFwiaWRcIik7XHJcblxyXG4gICAgICAgICAgICAkKFwiI2JvdC1sb2dvLWN1cnJlbnRcIikucmVtb3ZlQXR0cihcImlkXCIpO1xyXG4gICAgICAgICAgICAkKFwiYm90LWxvZ29cIikubGFzdCgpLmF0dHIoXCJpZFwiLCBcImJvdC1sb2dvLWN1cnJlbnRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoXCIjbGVmdC10YWctY3VycmVudFwiKS5hcHBlbmQobG9nb1RleHQpO1xyXG4gICAgICAgICQoXCIucm93LWN1cnJlbnRcIikuYXR0cihcImlkXCIsIFwibGFzdC1ib3Qtcm93XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhd2FpdCByZXR1cm5WYWx1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsYXkobXMpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgfSwgbXMpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gdW5wYXVzZSgpIHtcclxuICAgIHBhdXNlID0gZmFsc2U7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gcGF1c2VVbnRpbChlbGVtZW50LCBmbikge1xyXG4gICAgd2hpbGUgKHBhdXNlKSB7XHJcbiAgICAgICAgYXdhaXQgZGVsYXkoMTAwKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmbigkKGVsZW1lbnQpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5jcnlwdEZvcm1EYXRhKGRhdGEpIHtcclxuICAgIGxldCBwdWJsaWNLZXk7XHJcbn1cclxuXHJcbi8vIGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xyXG4vLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4vLyAgICAgZ3JlY2FwdGNoYS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgZ3JlY2FwdGNoYVxyXG4vLyAgICAgICAgICAgICAuZXhlY3V0ZShcIjZMZDRMeVFhQUFBQUFBY0pnSUFNSlFDUTNCLUFyY2h6bkJrV1I3QTlcIiwge1xyXG4vLyAgICAgICAgICAgICAgICAgYWN0aW9uOiBcInN1Ym1pdFwiLFxyXG4vLyAgICAgICAgICAgICB9KVxyXG4vLyAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodG9rZW4pIHtcclxuLy8gICAgICAgICAgICAgICAgIC8vIEFkZCB5b3VyIGxvZ2ljIHRvIHN1Ym1pdCB0byB5b3VyIGJhY2tlbmQgc2VydmVyIGhlcmUuXHJcbi8vICAgICAgICAgICAgIH0pO1xyXG4vLyAgICAgfSk7XHJcbi8vIH1cclxuIl19
